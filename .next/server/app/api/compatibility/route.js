"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "app/api/compatibility/route";
exports.ids = ["app/api/compatibility/route"];
exports.modules = {

/***/ "next/dist/compiled/next-server/app-route.runtime.dev.js":
/*!**************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-route.runtime.dev.js" ***!
  \**************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/app-route.runtime.dev.js");

/***/ }),

/***/ "(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fcompatibility%2Froute&page=%2Fapi%2Fcompatibility%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fcompatibility%2Froute.ts&appDir=%2FUsers%2Fshaivirau%2FSkincare%2Fskin-check%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Fshaivirau%2FSkincare%2Fskin-check&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!":
/*!***********************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fcompatibility%2Froute&page=%2Fapi%2Fcompatibility%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fcompatibility%2Froute.ts&appDir=%2FUsers%2Fshaivirau%2FSkincare%2Fskin-check%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Fshaivirau%2FSkincare%2Fskin-check&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D! ***!
  \***********************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   headerHooks: () => (/* binding */ headerHooks),\n/* harmony export */   originalPathname: () => (/* binding */ originalPathname),\n/* harmony export */   patchFetch: () => (/* binding */ patchFetch),\n/* harmony export */   requestAsyncStorage: () => (/* binding */ requestAsyncStorage),\n/* harmony export */   routeModule: () => (/* binding */ routeModule),\n/* harmony export */   serverHooks: () => (/* binding */ serverHooks),\n/* harmony export */   staticGenerationAsyncStorage: () => (/* binding */ staticGenerationAsyncStorage),\n/* harmony export */   staticGenerationBailout: () => (/* binding */ staticGenerationBailout)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/future/route-modules/app-route/module.compiled */ \"(rsc)/./node_modules/next/dist/server/future/route-modules/app-route/module.compiled.js\");\n/* harmony import */ var next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/dist/server/future/route-kind */ \"(rsc)/./node_modules/next/dist/server/future/route-kind.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next/dist/server/lib/patch-fetch */ \"(rsc)/./node_modules/next/dist/server/lib/patch-fetch.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var _Users_shaivirau_Skincare_skin_check_app_api_compatibility_route_ts__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./app/api/compatibility/route.ts */ \"(rsc)/./app/api/compatibility/route.ts\");\n\n\n\n\n// We inject the nextConfigOutput here so that we can use them in the route\n// module.\nconst nextConfigOutput = \"\"\nconst routeModule = new next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__.AppRouteRouteModule({\n    definition: {\n        kind: next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__.RouteKind.APP_ROUTE,\n        page: \"/api/compatibility/route\",\n        pathname: \"/api/compatibility\",\n        filename: \"route\",\n        bundlePath: \"app/api/compatibility/route\"\n    },\n    resolvedPagePath: \"/Users/shaivirau/Skincare/skin-check/app/api/compatibility/route.ts\",\n    nextConfigOutput,\n    userland: _Users_shaivirau_Skincare_skin_check_app_api_compatibility_route_ts__WEBPACK_IMPORTED_MODULE_3__\n});\n// Pull out the exports that we need to expose from the module. This should\n// be eliminated when we've moved the other routes to the new format. These\n// are used to hook into the route.\nconst { requestAsyncStorage, staticGenerationAsyncStorage, serverHooks, headerHooks, staticGenerationBailout } = routeModule;\nconst originalPathname = \"/api/compatibility/route\";\nfunction patchFetch() {\n    return (0,next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__.patchFetch)({\n        serverHooks,\n        staticGenerationAsyncStorage\n    });\n}\n\n\n//# sourceMappingURL=app-route.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvbmV4dC9kaXN0L2J1aWxkL3dlYnBhY2svbG9hZGVycy9uZXh0LWFwcC1sb2FkZXIuanM/bmFtZT1hcHAlMkZhcGklMkZjb21wYXRpYmlsaXR5JTJGcm91dGUmcGFnZT0lMkZhcGklMkZjb21wYXRpYmlsaXR5JTJGcm91dGUmYXBwUGF0aHM9JnBhZ2VQYXRoPXByaXZhdGUtbmV4dC1hcHAtZGlyJTJGYXBpJTJGY29tcGF0aWJpbGl0eSUyRnJvdXRlLnRzJmFwcERpcj0lMkZVc2VycyUyRnNoYWl2aXJhdSUyRlNraW5jYXJlJTJGc2tpbi1jaGVjayUyRmFwcCZwYWdlRXh0ZW5zaW9ucz10c3gmcGFnZUV4dGVuc2lvbnM9dHMmcGFnZUV4dGVuc2lvbnM9anN4JnBhZ2VFeHRlbnNpb25zPWpzJnJvb3REaXI9JTJGVXNlcnMlMkZzaGFpdmlyYXUlMkZTa2luY2FyZSUyRnNraW4tY2hlY2smaXNEZXY9dHJ1ZSZ0c2NvbmZpZ1BhdGg9dHNjb25maWcuanNvbiZiYXNlUGF0aD0mYXNzZXRQcmVmaXg9Jm5leHRDb25maWdPdXRwdXQ9JnByZWZlcnJlZFJlZ2lvbj0mbWlkZGxld2FyZUNvbmZpZz1lMzAlM0QhIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBQXNHO0FBQ3ZDO0FBQ2M7QUFDbUI7QUFDaEc7QUFDQTtBQUNBO0FBQ0Esd0JBQXdCLGdIQUFtQjtBQUMzQztBQUNBLGNBQWMseUVBQVM7QUFDdkI7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBLFlBQVk7QUFDWixDQUFDO0FBQ0Q7QUFDQTtBQUNBO0FBQ0EsUUFBUSx1R0FBdUc7QUFDL0c7QUFDQTtBQUNBLFdBQVcsNEVBQVc7QUFDdEI7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUM2Sjs7QUFFN0oiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9za2luLWNoZWNrLz85NWRkIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IEFwcFJvdXRlUm91dGVNb2R1bGUgfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci9mdXR1cmUvcm91dGUtbW9kdWxlcy9hcHAtcm91dGUvbW9kdWxlLmNvbXBpbGVkXCI7XG5pbXBvcnQgeyBSb3V0ZUtpbmQgfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci9mdXR1cmUvcm91dGUta2luZFwiO1xuaW1wb3J0IHsgcGF0Y2hGZXRjaCBhcyBfcGF0Y2hGZXRjaCB9IGZyb20gXCJuZXh0L2Rpc3Qvc2VydmVyL2xpYi9wYXRjaC1mZXRjaFwiO1xuaW1wb3J0ICogYXMgdXNlcmxhbmQgZnJvbSBcIi9Vc2Vycy9zaGFpdmlyYXUvU2tpbmNhcmUvc2tpbi1jaGVjay9hcHAvYXBpL2NvbXBhdGliaWxpdHkvcm91dGUudHNcIjtcbi8vIFdlIGluamVjdCB0aGUgbmV4dENvbmZpZ091dHB1dCBoZXJlIHNvIHRoYXQgd2UgY2FuIHVzZSB0aGVtIGluIHRoZSByb3V0ZVxuLy8gbW9kdWxlLlxuY29uc3QgbmV4dENvbmZpZ091dHB1dCA9IFwiXCJcbmNvbnN0IHJvdXRlTW9kdWxlID0gbmV3IEFwcFJvdXRlUm91dGVNb2R1bGUoe1xuICAgIGRlZmluaXRpb246IHtcbiAgICAgICAga2luZDogUm91dGVLaW5kLkFQUF9ST1VURSxcbiAgICAgICAgcGFnZTogXCIvYXBpL2NvbXBhdGliaWxpdHkvcm91dGVcIixcbiAgICAgICAgcGF0aG5hbWU6IFwiL2FwaS9jb21wYXRpYmlsaXR5XCIsXG4gICAgICAgIGZpbGVuYW1lOiBcInJvdXRlXCIsXG4gICAgICAgIGJ1bmRsZVBhdGg6IFwiYXBwL2FwaS9jb21wYXRpYmlsaXR5L3JvdXRlXCJcbiAgICB9LFxuICAgIHJlc29sdmVkUGFnZVBhdGg6IFwiL1VzZXJzL3NoYWl2aXJhdS9Ta2luY2FyZS9za2luLWNoZWNrL2FwcC9hcGkvY29tcGF0aWJpbGl0eS9yb3V0ZS50c1wiLFxuICAgIG5leHRDb25maWdPdXRwdXQsXG4gICAgdXNlcmxhbmRcbn0pO1xuLy8gUHVsbCBvdXQgdGhlIGV4cG9ydHMgdGhhdCB3ZSBuZWVkIHRvIGV4cG9zZSBmcm9tIHRoZSBtb2R1bGUuIFRoaXMgc2hvdWxkXG4vLyBiZSBlbGltaW5hdGVkIHdoZW4gd2UndmUgbW92ZWQgdGhlIG90aGVyIHJvdXRlcyB0byB0aGUgbmV3IGZvcm1hdC4gVGhlc2Vcbi8vIGFyZSB1c2VkIHRvIGhvb2sgaW50byB0aGUgcm91dGUuXG5jb25zdCB7IHJlcXVlc3RBc3luY1N0b3JhZ2UsIHN0YXRpY0dlbmVyYXRpb25Bc3luY1N0b3JhZ2UsIHNlcnZlckhvb2tzLCBoZWFkZXJIb29rcywgc3RhdGljR2VuZXJhdGlvbkJhaWxvdXQgfSA9IHJvdXRlTW9kdWxlO1xuY29uc3Qgb3JpZ2luYWxQYXRobmFtZSA9IFwiL2FwaS9jb21wYXRpYmlsaXR5L3JvdXRlXCI7XG5mdW5jdGlvbiBwYXRjaEZldGNoKCkge1xuICAgIHJldHVybiBfcGF0Y2hGZXRjaCh7XG4gICAgICAgIHNlcnZlckhvb2tzLFxuICAgICAgICBzdGF0aWNHZW5lcmF0aW9uQXN5bmNTdG9yYWdlXG4gICAgfSk7XG59XG5leHBvcnQgeyByb3V0ZU1vZHVsZSwgcmVxdWVzdEFzeW5jU3RvcmFnZSwgc3RhdGljR2VuZXJhdGlvbkFzeW5jU3RvcmFnZSwgc2VydmVySG9va3MsIGhlYWRlckhvb2tzLCBzdGF0aWNHZW5lcmF0aW9uQmFpbG91dCwgb3JpZ2luYWxQYXRobmFtZSwgcGF0Y2hGZXRjaCwgIH07XG5cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWFwcC1yb3V0ZS5qcy5tYXAiXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fcompatibility%2Froute&page=%2Fapi%2Fcompatibility%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fcompatibility%2Froute.ts&appDir=%2FUsers%2Fshaivirau%2FSkincare%2Fskin-check%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Fshaivirau%2FSkincare%2Fskin-check&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!\n");

/***/ }),

/***/ "(rsc)/./app/api/compatibility/route.ts":
/*!****************************************!*\
  !*** ./app/api/compatibility/route.ts ***!
  \****************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   POST: () => (/* binding */ POST)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/web/exports/next-response */ \"(rsc)/./node_modules/next/dist/server/web/exports/next-response.js\");\n\nfunction normalize(out, originalProducts) {\n    // Basic shape validation\n    if (typeof out !== \"object\" || out === null) throw new Error(\"Bad JSON\");\n    // Ensure all required fields exist with defaults\n    const res = {\n        routine_rating: out.routine_rating ? {\n            barrier_safety: Math.max(0, Math.min(5, Math.round(out.routine_rating.barrier_safety || 3))),\n            irritation_risk: Math.max(0, Math.min(5, Math.round(out.routine_rating.irritation_risk || 2))),\n            efficacy: Math.max(0, Math.min(5, Math.round(out.routine_rating.efficacy || 3))),\n            compatibility: Math.max(0, Math.min(5, Math.round(out.routine_rating.compatibility || 3))),\n            long_term_safety: out.routine_rating.long_term_safety ? Math.max(0, Math.min(5, Math.round(out.routine_rating.long_term_safety))) : undefined\n        } : {\n            barrier_safety: 3,\n            irritation_risk: 2,\n            efficacy: 3,\n            compatibility: 3,\n            long_term_safety: 3\n        },\n        score_rationale: out.score_rationale || \"Analysis completed successfully.\",\n        routine_plan: {\n            am: Array.isArray(out.routine_plan?.am) ? out.routine_plan.am : [],\n            pm: Array.isArray(out.routine_plan?.pm) ? out.routine_plan.pm : [],\n            frequencies: out.routine_plan?.frequencies || {}\n        },\n        products: Array.isArray(out.products) ? out.products.map((p)=>({\n                query: p.query || \"\",\n                matched_product: p.matched_product || p.name || \"\",\n                role: p.role || \"Skincare product\",\n                key_benefits: Array.isArray(p.key_benefits) ? p.key_benefits : [\n                    \"General skincare benefits\"\n                ],\n                cautions: Array.isArray(p.cautions) ? p.cautions : [],\n                ingredients_inci: p.ingredients_inci || \"unknown\",\n                citations: Array.isArray(p.citations) ? p.citations : [],\n                skin_impact: p.skin_impact || \"General product effects on skin\"\n            })) : originalProducts.map((p)=>({\n                query: p,\n                matched_product: p,\n                role: \"Skincare product\",\n                key_benefits: [\n                    \"General skincare benefits\"\n                ],\n                cautions: [],\n                ingredients_inci: \"unknown\",\n                citations: [],\n                skin_impact: \"General product effects on skin\"\n            })),\n        analysis: {\n            pairs: Array.isArray(out.analysis?.pairs) ? out.analysis.pairs : [],\n            global_observations: Array.isArray(out.analysis?.global_observations) ? out.analysis.global_observations : [\n                \"Routine analysis completed.\"\n            ],\n            suggestions: Array.isArray(out.analysis?.suggestions) ? out.analysis.suggestions : [],\n            makeup_skincare_synergy: Array.isArray(out.analysis?.makeup_skincare_synergy) ? out.analysis.makeup_skincare_synergy : []\n        }\n    };\n    // Frequencies guardrail for retinoids\n    const freq = res.routine_plan?.frequencies || {};\n    const lowerKeys = Object.keys(freq).reduce((acc, k)=>{\n        acc[k.toLowerCase()] = k;\n        return acc;\n    }, {});\n    const mentionsRetinoid = (s)=>/retin(al|ol)|retinoid/i.test(s);\n    const needsRamp = Object.keys(lowerKeys).some((k)=>mentionsRetinoid(k)) || (res.products || []).some((p)=>mentionsRetinoid(p.role) || mentionsRetinoid(p.matched_product));\n    if (needsRamp) {\n        const key = Object.keys(lowerKeys).find((k)=>mentionsRetinoid(k)) ?? \"retinal\";\n        const originalKey = lowerKeys[key] ?? key;\n        freq[originalKey] = \"start 2–3 nights/week for 2–3 weeks, then 3–4 nights/week if tolerated\";\n    }\n    // Ensure ALL compatibility pairs exist - generate missing ones\n    const expectedPairs = (res.products?.length || 0) * ((res.products?.length || 0) - 1) / 2;\n    const existingPairs = res.analysis?.pairs?.length || 0;\n    if (expectedPairs > 0) {\n        // Create a set of existing pairs for quick lookup\n        const existingPairSet = new Set();\n        (res.analysis?.pairs || []).forEach((pair)=>{\n            const sortedPair = pair.between.sort().join(\"|\");\n            existingPairSet.add(sortedPair);\n        });\n        // Generate missing pairs\n        for(let i = 0; i < (res.products?.length || 0); i++){\n            for(let j = i + 1; j < (res.products?.length || 0); j++){\n                const product1 = res.products?.[i]?.matched_product || \"\";\n                const product2 = res.products?.[j]?.matched_product || \"\";\n                const sortedPair = [\n                    product1,\n                    product2\n                ].sort().join(\"|\");\n                if (!existingPairSet.has(sortedPair)) {\n                    // Determine if this is a makeup-skincare interaction\n                    const isMakeupSkincare = (product1.toLowerCase().includes(\"concealer\") || product1.toLowerCase().includes(\"blush\") || product1.toLowerCase().includes(\"mascara\") || product1.toLowerCase().includes(\"foundation\") || product1.toLowerCase().includes(\"lip\")) && (product2.toLowerCase().includes(\"sunscreen\") || product2.toLowerCase().includes(\"toner\") || product2.toLowerCase().includes(\"cleanser\") || product2.toLowerCase().includes(\"cream\") || product2.toLowerCase().includes(\"serum\")) || (product2.toLowerCase().includes(\"concealer\") || product2.toLowerCase().includes(\"blush\") || product2.toLowerCase().includes(\"mascara\") || product2.toLowerCase().includes(\"foundation\") || product2.toLowerCase().includes(\"lip\")) && (product1.toLowerCase().includes(\"sunscreen\") || product1.toLowerCase().includes(\"toner\") || product1.toLowerCase().includes(\"cleanser\") || product1.toLowerCase().includes(\"cream\") || product1.toLowerCase().includes(\"serum\"));\n                    res.analysis?.pairs?.push({\n                        between: [\n                            product1,\n                            product2\n                        ],\n                        flags: [\n                            {\n                                type: isMakeupSkincare ? \"makeup_skincare_interaction\" : \"ok_together\",\n                                severity: \"low\",\n                                why: isMakeupSkincare ? \"Makeup and skincare products can work well together when applied in the correct order.\" : \"Products appear compatible based on general formulation principles.\",\n                                sources: [\n                                    \"General skincare compatibility guidelines\"\n                                ]\n                            }\n                        ],\n                        suggestions: isMakeupSkincare ? [\n                            \"Apply skincare first, allow to absorb, then apply makeup.\"\n                        ] : [\n                            \"Monitor for any irritation when using together.\"\n                        ]\n                    });\n                }\n            }\n        }\n    }\n    // Citation reminder if benefits/cautions exist but citations missing\n    const missingCites = (res.products || []).some((p)=>(p.key_benefits.length > 0 || p.cautions.length > 0) && p.citations.length === 0);\n    if (missingCites) {\n        res.analysis?.suggestions?.push(\"Some product claims lack citations; prefer brand pages or INCIDecoder when listing INCI or ingredient-based benefits.\");\n    }\n    return res;\n}\nasync function POST(request) {\n    try {\n        const { products } = await request.json();\n        if (!products || !Array.isArray(products)) {\n            return next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_0__[\"default\"].json({\n                error: \"Products array is required\"\n            }, {\n                status: 400\n            });\n        }\n        const apiKey = process.env.OPENAI_API_KEY;\n        if (!apiKey) {\n            return next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_0__[\"default\"].json({\n                error: \"OpenAI API key not configured\"\n            }, {\n                status: 500\n            });\n        }\n        const analyzeBody = {\n            model: \"gpt-4o-mini\",\n            temperature: 0.3,\n            response_format: {\n                type: \"json_object\"\n            },\n            messages: [\n                {\n                    role: \"system\",\n                    content: 'You are a cosmetic chemist + skincare educator with expertise in both skincare and makeup formulations. CRITICAL: You MUST output a complete, consistent JSON response every time.             MANDATORY REQUIREMENTS:             1) ALWAYS include ALL fields in this EXACT schema:             {               \"routine_rating\": {                 \"barrier_safety\": number (0-5 scale),                 \"irritation_risk\": number (0-5 scale, lower is better),                 \"efficacy\": number (0-5 scale),                 \"compatibility\": number (0-5 scale),                 \"long_term_safety\": number (0-5 scale, optional)               },               \"score_rationale\": string (2-4 sentences),               \"routine_plan\": {                 \"am\": string[] (MUST have at least 1 item),                 \"pm\": string[] (MUST have at least 1 item),                 \"frequencies\": { [productOrActive: string]: string } (MUST have at least 1 frequency)               },               \"products\": [                 {                   \"query\": string,                   \"matched_product\": string,                   \"role\": string (specify if skincare or makeup),                   \"key_benefits\": string[] (MUST have at least 1 benefit),                   \"cautions\": string[] (can be empty array),                   \"ingredients_inci\": { \"names\": string[] } | \"unknown\",                   \"citations\": string[] (MUST have at least 1 citation),                   \"skin_impact\": string (how this product affects skin health)                 }               ],               \"analysis\": {                 \"pairs\": [                   {                     \"between\": [string, string],                     \"flags\": [                       {                         \"type\": \"ok_together\" | \"irritation_stack\" | \"redundancy\" | \"caution\" | \"makeup_skincare_interaction\" | \"pilling_risk\" | \"oxidization_risk\",                         \"severity\": \"low\" | \"medium\" | \"high\",                         \"why\": string,                         \"sources\": string[]                       }                     ],                     \"suggestions\": string[]                   }                 ],                 \"global_observations\": string[] (MUST have at least 2 observations),                 \"suggestions\": string[] (MUST have at least 1 suggestion),                 \"makeup_skincare_synergy\": string[] (how makeup and skincare work together)               }             }             CONSISTENCY RULES:             - CRITICAL: You MUST analyze compatibility between EVERY SINGLE product pair. If there are N products, you must include exactly N*(N-1)/2 pairs in the analysis.pairs array             - ALWAYS include routine_plan.am and pm arrays (never empty)             - ALWAYS include global_observations (minimum 2 items)             - ALWAYS include suggestions (minimum 1 item)             - If unsure about ingredients, use \"unknown\" but still provide analysis             - For makeup products, analyze how they interact with skincare underneath             - Consider pilling, oxidization, and wear-time interactions             - EXAMPLE: For 3 products [A, B, C], you must include pairs: A+B, A+C, B+C             - EXAMPLE: For 4 products [A, B, C, D], you must include pairs: A+B, A+C, A+D, B+C, B+D, C+D             frequencies examples:             { \"retinal\": \"start 2–3 nights/week for 2–3 weeks, then 3–4 nights/week if tolerated\",               \"salicylic acid\": \"1–3x/week\",               \"sunscreen\": \"every AM\",               \"foundation\": \"daily as needed\",               \"retinol cream\": \"2–3 nights/week\" }             MULTI-FACTOR RATING (0-5 scale per category):             - Barrier Safety: 5=excellent barrier support, 0=barrier damaging             - Irritation Risk: 5=high risk, 0=very gentle             - Efficacy: 5=highly effective for goals, 0=minimal benefit             - Compatibility: 5=perfect layering, 0=conflicting ingredients             - Long-term Safety: 5=sustainable for years, 0=unsafe long-term             MAKEUP-SPECIFIC ANALYSIS:             - Analyze how makeup ingredients affect skin health over time             - Consider comedogenic potential of makeup ingredients             - Evaluate how makeup interacts with skincare actives             - Look for potential pilling between skincare and makeup layers             - Check for ingredients that may oxidize or break down together             - Assess whether makeup provides additional skincare benefits (SPF, antioxidants, etc.)             - Consider removal requirements and their impact on skin barrier'\n                },\n                {\n                    role: \"user\",\n                    content: \"Evaluate this routine for compatibility using the exact schema above.\"\n                },\n                {\n                    role: \"user\",\n                    content: JSON.stringify({\n                        products\n                    })\n                }\n            ]\n        };\n        const response = await fetch(\"https://api.openai.com/v1/chat/completions\", {\n            method: \"POST\",\n            headers: {\n                \"Authorization\": `Bearer ${apiKey}`,\n                \"Content-Type\": \"application/json\"\n            },\n            body: JSON.stringify(analyzeBody)\n        });\n        if (!response.ok) {\n            throw new Error(`OpenAI API error: ${response.status}`);\n        }\n        const data = await response.json();\n        // Extract the JSON content from the OpenAI response\n        if (data.choices && data.choices[0] && data.choices[0].message && data.choices[0].message.content) {\n            try {\n                const raw = JSON.parse(data.choices[0].message.content);\n                let out;\n                try {\n                    out = normalize(raw, products);\n                } catch (e) {\n                    return next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_0__[\"default\"].json({\n                        error: {\n                            message: \"Invalid model JSON\",\n                            details: String(e?.message || e)\n                        }\n                    }, {\n                        status: 422\n                    });\n                }\n                return next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_0__[\"default\"].json(out);\n            } catch (parseError) {\n                console.error(\"Error parsing OpenAI response:\", parseError);\n                return next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_0__[\"default\"].json({\n                    error: \"Failed to parse analysis result\"\n                }, {\n                    status: 500\n                });\n            }\n        } else {\n            return next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_0__[\"default\"].json({\n                error: \"Invalid response from OpenAI\"\n            }, {\n                status: 500\n            });\n        }\n    } catch (error) {\n        console.error(\"Error in compatibility analysis:\", error);\n        return next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_0__[\"default\"].json({\n            error: \"Failed to analyze compatibility\"\n        }, {\n            status: 500\n        });\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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WUFDM0IsRUFBRSxPQUFPZ0gsWUFBWTtnQkFDbkJDLFFBQVE3QixLQUFLLENBQUMsa0NBQWtDNEI7Z0JBQ2hELE9BQU9sSCxrRkFBWUEsQ0FBQ3FGLElBQUksQ0FDdEI7b0JBQUVDLE9BQU87Z0JBQWtDLEdBQzNDO29CQUFFQyxRQUFRO2dCQUFJO1lBRWxCO1FBQ0YsT0FBTztZQUNMLE9BQU92RixrRkFBWUEsQ0FBQ3FGLElBQUksQ0FDdEI7Z0JBQUVDLE9BQU87WUFBK0IsR0FDeEM7Z0JBQUVDLFFBQVE7WUFBSTtRQUVsQjtJQUVGLEVBQUUsT0FBT0QsT0FBTztRQUNkNkIsUUFBUTdCLEtBQUssQ0FBQyxvQ0FBb0NBO1FBQ2xELE9BQU90RixrRkFBWUEsQ0FBQ3FGLElBQUksQ0FDdEI7WUFBRUMsT0FBTztRQUFrQyxHQUMzQztZQUFFQyxRQUFRO1FBQUk7SUFFbEI7QUFDRiIsInNvdXJjZXMiOlsid2VicGFjazovL3NraW4tY2hlY2svLi9hcHAvYXBpL2NvbXBhdGliaWxpdHkvcm91dGUudHM/MDcxMSJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBOZXh0UmVxdWVzdCwgTmV4dFJlc3BvbnNlIH0gZnJvbSAnbmV4dC9zZXJ2ZXInO1xuXG50eXBlIENvbXBhdCA9IHtcbiAgcm91dGluZV9yYXRpbmc/OiB7XG4gICAgYmFycmllcl9zYWZldHk6IG51bWJlcjtcbiAgICBpcnJpdGF0aW9uX3Jpc2s6IG51bWJlcjtcbiAgICBlZmZpY2FjeTogbnVtYmVyO1xuICAgIGNvbXBhdGliaWxpdHk6IG51bWJlcjtcbiAgICBsb25nX3Rlcm1fc2FmZXR5PzogbnVtYmVyO1xuICB9O1xuICBzY29yZV9yYXRpb25hbGU/OiBzdHJpbmc7XG4gIHJvdXRpbmVfcGxhbj86IHsgYW0/OiBzdHJpbmdbXTsgcG0/OiBzdHJpbmdbXTsgZnJlcXVlbmNpZXM/OiBSZWNvcmQ8c3RyaW5nLHN0cmluZz4gfTtcbiAgcHJvZHVjdHM/OiBBcnJheTx7XG4gICAgcXVlcnk6IHN0cmluZzsgbWF0Y2hlZF9wcm9kdWN0OiBzdHJpbmc7IHJvbGU6IHN0cmluZztcbiAgICBrZXlfYmVuZWZpdHM6IHN0cmluZ1tdOyBjYXV0aW9uczogc3RyaW5nW107XG4gICAgaW5ncmVkaWVudHNfaW5jaTogeyBuYW1lczogc3RyaW5nW10gfSB8IFwidW5rbm93blwiO1xuICAgIGNpdGF0aW9uczogc3RyaW5nW107XG4gICAgc2tpbl9pbXBhY3Q/OiBzdHJpbmc7XG4gIH0+O1xuICBhbmFseXNpcz86IHsgXG4gICAgZ2xvYmFsX29ic2VydmF0aW9ucz86IHN0cmluZ1tdOyBcbiAgICBzdWdnZXN0aW9ucz86IHN0cmluZ1tdOyBcbiAgICBwYWlycz86IGFueVtdO1xuICAgIG1ha2V1cF9za2luY2FyZV9zeW5lcmd5Pzogc3RyaW5nW107XG4gIH07XG59O1xuXG5mdW5jdGlvbiBub3JtYWxpemUob3V0OiBhbnksIG9yaWdpbmFsUHJvZHVjdHM6IHN0cmluZ1tdKTogQ29tcGF0IHtcbiAgLy8gQmFzaWMgc2hhcGUgdmFsaWRhdGlvblxuICBpZiAodHlwZW9mIG91dCAhPT0gXCJvYmplY3RcIiB8fCBvdXQgPT09IG51bGwpIHRocm93IG5ldyBFcnJvcihcIkJhZCBKU09OXCIpO1xuICBcbiAgLy8gRW5zdXJlIGFsbCByZXF1aXJlZCBmaWVsZHMgZXhpc3Qgd2l0aCBkZWZhdWx0c1xuICBjb25zdCByZXM6IENvbXBhdCA9IHtcbiAgICByb3V0aW5lX3JhdGluZzogb3V0LnJvdXRpbmVfcmF0aW5nID8ge1xuICAgICAgYmFycmllcl9zYWZldHk6IE1hdGgubWF4KDAsIE1hdGgubWluKDUsIE1hdGgucm91bmQob3V0LnJvdXRpbmVfcmF0aW5nLmJhcnJpZXJfc2FmZXR5IHx8IDMpKSksXG4gICAgICBpcnJpdGF0aW9uX3Jpc2s6IE1hdGgubWF4KDAsIE1hdGgubWluKDUsIE1hdGgucm91bmQob3V0LnJvdXRpbmVfcmF0aW5nLmlycml0YXRpb25fcmlzayB8fCAyKSkpLFxuICAgICAgZWZmaWNhY3k6IE1hdGgubWF4KDAsIE1hdGgubWluKDUsIE1hdGgucm91bmQob3V0LnJvdXRpbmVfcmF0aW5nLmVmZmljYWN5IHx8IDMpKSksXG4gICAgICBjb21wYXRpYmlsaXR5OiBNYXRoLm1heCgwLCBNYXRoLm1pbig1LCBNYXRoLnJvdW5kKG91dC5yb3V0aW5lX3JhdGluZy5jb21wYXRpYmlsaXR5IHx8IDMpKSksXG4gICAgICBsb25nX3Rlcm1fc2FmZXR5OiBvdXQucm91dGluZV9yYXRpbmcubG9uZ190ZXJtX3NhZmV0eSA/IE1hdGgubWF4KDAsIE1hdGgubWluKDUsIE1hdGgucm91bmQob3V0LnJvdXRpbmVfcmF0aW5nLmxvbmdfdGVybV9zYWZldHkpKSkgOiB1bmRlZmluZWRcbiAgICB9IDoge1xuICAgICAgYmFycmllcl9zYWZldHk6IDMsXG4gICAgICBpcnJpdGF0aW9uX3Jpc2s6IDIsXG4gICAgICBlZmZpY2FjeTogMyxcbiAgICAgIGNvbXBhdGliaWxpdHk6IDMsXG4gICAgICBsb25nX3Rlcm1fc2FmZXR5OiAzXG4gICAgfSxcbiAgICBzY29yZV9yYXRpb25hbGU6IG91dC5zY29yZV9yYXRpb25hbGUgfHwgXCJBbmFseXNpcyBjb21wbGV0ZWQgc3VjY2Vzc2Z1bGx5LlwiLFxuICAgIHJvdXRpbmVfcGxhbjoge1xuICAgICAgYW06IEFycmF5LmlzQXJyYXkob3V0LnJvdXRpbmVfcGxhbj8uYW0pID8gb3V0LnJvdXRpbmVfcGxhbi5hbSA6IFtdLFxuICAgICAgcG06IEFycmF5LmlzQXJyYXkob3V0LnJvdXRpbmVfcGxhbj8ucG0pID8gb3V0LnJvdXRpbmVfcGxhbi5wbSA6IFtdLFxuICAgICAgZnJlcXVlbmNpZXM6IG91dC5yb3V0aW5lX3BsYW4/LmZyZXF1ZW5jaWVzIHx8IHt9XG4gICAgfSxcbiAgICBwcm9kdWN0czogQXJyYXkuaXNBcnJheShvdXQucHJvZHVjdHMpID8gb3V0LnByb2R1Y3RzLm1hcCgocDogYW55KSA9PiAoe1xuICAgICAgcXVlcnk6IHAucXVlcnkgfHwgXCJcIixcbiAgICAgIG1hdGNoZWRfcHJvZHVjdDogcC5tYXRjaGVkX3Byb2R1Y3QgfHwgcC5uYW1lIHx8IFwiXCIsXG4gICAgICByb2xlOiBwLnJvbGUgfHwgXCJTa2luY2FyZSBwcm9kdWN0XCIsXG4gICAgICBrZXlfYmVuZWZpdHM6IEFycmF5LmlzQXJyYXkocC5rZXlfYmVuZWZpdHMpID8gcC5rZXlfYmVuZWZpdHMgOiBbXCJHZW5lcmFsIHNraW5jYXJlIGJlbmVmaXRzXCJdLFxuICAgICAgY2F1dGlvbnM6IEFycmF5LmlzQXJyYXkocC5jYXV0aW9ucykgPyBwLmNhdXRpb25zIDogW10sXG4gICAgICBpbmdyZWRpZW50c19pbmNpOiBwLmluZ3JlZGllbnRzX2luY2kgfHwgXCJ1bmtub3duXCIsXG4gICAgICBjaXRhdGlvbnM6IEFycmF5LmlzQXJyYXkocC5jaXRhdGlvbnMpID8gcC5jaXRhdGlvbnMgOiBbXSxcbiAgICAgIHNraW5faW1wYWN0OiBwLnNraW5faW1wYWN0IHx8IFwiR2VuZXJhbCBwcm9kdWN0IGVmZmVjdHMgb24gc2tpblwiXG4gICAgfSkpIDogb3JpZ2luYWxQcm9kdWN0cy5tYXAocCA9PiAoe1xuICAgICAgcXVlcnk6IHAsXG4gICAgICBtYXRjaGVkX3Byb2R1Y3Q6IHAsXG4gICAgICByb2xlOiBcIlNraW5jYXJlIHByb2R1Y3RcIixcbiAgICAgIGtleV9iZW5lZml0czogW1wiR2VuZXJhbCBza2luY2FyZSBiZW5lZml0c1wiXSxcbiAgICAgIGNhdXRpb25zOiBbXSxcbiAgICAgIGluZ3JlZGllbnRzX2luY2k6IFwidW5rbm93blwiLFxuICAgICAgY2l0YXRpb25zOiBbXSxcbiAgICAgIHNraW5faW1wYWN0OiBcIkdlbmVyYWwgcHJvZHVjdCBlZmZlY3RzIG9uIHNraW5cIlxuICAgIH0pKSxcbiAgICBhbmFseXNpczoge1xuICAgICAgcGFpcnM6IEFycmF5LmlzQXJyYXkob3V0LmFuYWx5c2lzPy5wYWlycykgPyBvdXQuYW5hbHlzaXMucGFpcnMgOiBbXSxcbiAgICAgIGdsb2JhbF9vYnNlcnZhdGlvbnM6IEFycmF5LmlzQXJyYXkob3V0LmFuYWx5c2lzPy5nbG9iYWxfb2JzZXJ2YXRpb25zKSA/IG91dC5hbmFseXNpcy5nbG9iYWxfb2JzZXJ2YXRpb25zIDogW1wiUm91dGluZSBhbmFseXNpcyBjb21wbGV0ZWQuXCJdLFxuICAgICAgc3VnZ2VzdGlvbnM6IEFycmF5LmlzQXJyYXkob3V0LmFuYWx5c2lzPy5zdWdnZXN0aW9ucykgPyBvdXQuYW5hbHlzaXMuc3VnZ2VzdGlvbnMgOiBbXSxcbiAgICAgIG1ha2V1cF9za2luY2FyZV9zeW5lcmd5OiBBcnJheS5pc0FycmF5KG91dC5hbmFseXNpcz8ubWFrZXVwX3NraW5jYXJlX3N5bmVyZ3kpID8gb3V0LmFuYWx5c2lzLm1ha2V1cF9za2luY2FyZV9zeW5lcmd5IDogW11cbiAgICB9XG4gIH07XG5cbiAgLy8gRnJlcXVlbmNpZXMgZ3VhcmRyYWlsIGZvciByZXRpbm9pZHNcbiAgY29uc3QgZnJlcSA9IHJlcy5yb3V0aW5lX3BsYW4/LmZyZXF1ZW5jaWVzIHx8IHt9O1xuICBjb25zdCBsb3dlcktleXMgPSBPYmplY3Qua2V5cyhmcmVxKS5yZWR1Y2UoKGFjYyxrKT0+eyBhY2Nbay50b0xvd2VyQ2FzZSgpXSA9IGs7IHJldHVybiBhY2M7IH0sIHt9IGFzIFJlY29yZDxzdHJpbmcsc3RyaW5nPik7XG4gIGNvbnN0IG1lbnRpb25zUmV0aW5vaWQgPSAoczpzdHJpbmcpPT4vcmV0aW4oYWx8b2wpfHJldGlub2lkL2kudGVzdChzKTtcbiAgY29uc3QgbmVlZHNSYW1wID0gT2JqZWN0LmtleXMobG93ZXJLZXlzKS5zb21lKGs9Pm1lbnRpb25zUmV0aW5vaWQoaykpIHx8XG4gICAgKHJlcy5wcm9kdWN0cyB8fCBbXSkuc29tZShwPT5tZW50aW9uc1JldGlub2lkKHAucm9sZSl8fG1lbnRpb25zUmV0aW5vaWQocC5tYXRjaGVkX3Byb2R1Y3QpKTtcblxuICBpZiAobmVlZHNSYW1wKSB7XG4gICAgY29uc3Qga2V5ID0gT2JqZWN0LmtleXMobG93ZXJLZXlzKS5maW5kKGs9Pm1lbnRpb25zUmV0aW5vaWQoaykpID8/IFwicmV0aW5hbFwiO1xuICAgIGNvbnN0IG9yaWdpbmFsS2V5ID0gbG93ZXJLZXlzW2tleV0gPz8ga2V5O1xuICAgIGZyZXFbb3JpZ2luYWxLZXldID0gXCJzdGFydCAy4oCTMyBuaWdodHMvd2VlayBmb3IgMuKAkzMgd2Vla3MsIHRoZW4gM+KAkzQgbmlnaHRzL3dlZWsgaWYgdG9sZXJhdGVkXCI7XG4gIH1cblxuICAvLyBFbnN1cmUgQUxMIGNvbXBhdGliaWxpdHkgcGFpcnMgZXhpc3QgLSBnZW5lcmF0ZSBtaXNzaW5nIG9uZXNcbiAgY29uc3QgZXhwZWN0ZWRQYWlycyA9IChyZXMucHJvZHVjdHM/Lmxlbmd0aCB8fCAwKSAqICgocmVzLnByb2R1Y3RzPy5sZW5ndGggfHwgMCkgLSAxKSAvIDI7XG4gIGNvbnN0IGV4aXN0aW5nUGFpcnMgPSByZXMuYW5hbHlzaXM/LnBhaXJzPy5sZW5ndGggfHwgMDtcbiAgXG4gIGlmIChleHBlY3RlZFBhaXJzID4gMCkge1xuICAgIC8vIENyZWF0ZSBhIHNldCBvZiBleGlzdGluZyBwYWlycyBmb3IgcXVpY2sgbG9va3VwXG4gICAgY29uc3QgZXhpc3RpbmdQYWlyU2V0ID0gbmV3IFNldCgpO1xuICAgIChyZXMuYW5hbHlzaXM/LnBhaXJzIHx8IFtdKS5mb3JFYWNoKHBhaXIgPT4ge1xuICAgICAgY29uc3Qgc29ydGVkUGFpciA9IHBhaXIuYmV0d2Vlbi5zb3J0KCkuam9pbihcInxcIik7XG4gICAgICBleGlzdGluZ1BhaXJTZXQuYWRkKHNvcnRlZFBhaXIpO1xuICAgIH0pO1xuICAgIFxuICAgIC8vIEdlbmVyYXRlIG1pc3NpbmcgcGFpcnNcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IChyZXMucHJvZHVjdHM/Lmxlbmd0aCB8fCAwKTsgaSsrKSB7XG4gICAgICBmb3IgKGxldCBqID0gaSArIDE7IGogPCAocmVzLnByb2R1Y3RzPy5sZW5ndGggfHwgMCk7IGorKykge1xuICAgICAgICBjb25zdCBwcm9kdWN0MSA9IHJlcy5wcm9kdWN0cz8uW2ldPy5tYXRjaGVkX3Byb2R1Y3QgfHwgXCJcIjtcbiAgICAgICAgY29uc3QgcHJvZHVjdDIgPSByZXMucHJvZHVjdHM/LltqXT8ubWF0Y2hlZF9wcm9kdWN0IHx8IFwiXCI7XG4gICAgICAgIGNvbnN0IHNvcnRlZFBhaXIgPSBbcHJvZHVjdDEsIHByb2R1Y3QyXS5zb3J0KCkuam9pbihcInxcIik7XG4gICAgICAgIFxuICAgICAgICBpZiAoIWV4aXN0aW5nUGFpclNldC5oYXMoc29ydGVkUGFpcikpIHtcbiAgICAgICAgICAvLyBEZXRlcm1pbmUgaWYgdGhpcyBpcyBhIG1ha2V1cC1za2luY2FyZSBpbnRlcmFjdGlvblxuICAgICAgICAgIGNvbnN0IGlzTWFrZXVwU2tpbmNhcmUgPSAoXG4gICAgICAgICAgICAocHJvZHVjdDEudG9Mb3dlckNhc2UoKS5pbmNsdWRlcygnY29uY2VhbGVyJykgfHwgXG4gICAgICAgICAgICAgcHJvZHVjdDEudG9Mb3dlckNhc2UoKS5pbmNsdWRlcygnYmx1c2gnKSB8fCBcbiAgICAgICAgICAgICBwcm9kdWN0MS50b0xvd2VyQ2FzZSgpLmluY2x1ZGVzKCdtYXNjYXJhJykgfHxcbiAgICAgICAgICAgICBwcm9kdWN0MS50b0xvd2VyQ2FzZSgpLmluY2x1ZGVzKCdmb3VuZGF0aW9uJykgfHxcbiAgICAgICAgICAgICBwcm9kdWN0MS50b0xvd2VyQ2FzZSgpLmluY2x1ZGVzKCdsaXAnKSkgJiZcbiAgICAgICAgICAgIChwcm9kdWN0Mi50b0xvd2VyQ2FzZSgpLmluY2x1ZGVzKCdzdW5zY3JlZW4nKSB8fCBcbiAgICAgICAgICAgICBwcm9kdWN0Mi50b0xvd2VyQ2FzZSgpLmluY2x1ZGVzKCd0b25lcicpIHx8IFxuICAgICAgICAgICAgIHByb2R1Y3QyLnRvTG93ZXJDYXNlKCkuaW5jbHVkZXMoJ2NsZWFuc2VyJykgfHxcbiAgICAgICAgICAgICBwcm9kdWN0Mi50b0xvd2VyQ2FzZSgpLmluY2x1ZGVzKCdjcmVhbScpIHx8XG4gICAgICAgICAgICAgcHJvZHVjdDIudG9Mb3dlckNhc2UoKS5pbmNsdWRlcygnc2VydW0nKSlcbiAgICAgICAgICApIHx8IChcbiAgICAgICAgICAgIChwcm9kdWN0Mi50b0xvd2VyQ2FzZSgpLmluY2x1ZGVzKCdjb25jZWFsZXInKSB8fCBcbiAgICAgICAgICAgICBwcm9kdWN0Mi50b0xvd2VyQ2FzZSgpLmluY2x1ZGVzKCdibHVzaCcpIHx8IFxuICAgICAgICAgICAgIHByb2R1Y3QyLnRvTG93ZXJDYXNlKCkuaW5jbHVkZXMoJ21hc2NhcmEnKSB8fFxuICAgICAgICAgICAgIHByb2R1Y3QyLnRvTG93ZXJDYXNlKCkuaW5jbHVkZXMoJ2ZvdW5kYXRpb24nKSB8fFxuICAgICAgICAgICAgIHByb2R1Y3QyLnRvTG93ZXJDYXNlKCkuaW5jbHVkZXMoJ2xpcCcpKSAmJlxuICAgICAgICAgICAgKHByb2R1Y3QxLnRvTG93ZXJDYXNlKCkuaW5jbHVkZXMoJ3N1bnNjcmVlbicpIHx8IFxuICAgICAgICAgICAgIHByb2R1Y3QxLnRvTG93ZXJDYXNlKCkuaW5jbHVkZXMoJ3RvbmVyJykgfHwgXG4gICAgICAgICAgICAgcHJvZHVjdDEudG9Mb3dlckNhc2UoKS5pbmNsdWRlcygnY2xlYW5zZXInKSB8fFxuICAgICAgICAgICAgIHByb2R1Y3QxLnRvTG93ZXJDYXNlKCkuaW5jbHVkZXMoJ2NyZWFtJykgfHxcbiAgICAgICAgICAgICBwcm9kdWN0MS50b0xvd2VyQ2FzZSgpLmluY2x1ZGVzKCdzZXJ1bScpKVxuICAgICAgICAgICk7XG4gICAgICAgICAgXG4gICAgICAgICAgcmVzLmFuYWx5c2lzPy5wYWlycz8ucHVzaCh7XG4gICAgICAgICAgICBiZXR3ZWVuOiBbcHJvZHVjdDEsIHByb2R1Y3QyXSxcbiAgICAgICAgICAgIGZsYWdzOiBbe1xuICAgICAgICAgICAgICB0eXBlOiBpc01ha2V1cFNraW5jYXJlID8gXCJtYWtldXBfc2tpbmNhcmVfaW50ZXJhY3Rpb25cIiA6IFwib2tfdG9nZXRoZXJcIixcbiAgICAgICAgICAgICAgc2V2ZXJpdHk6IFwibG93XCIsXG4gICAgICAgICAgICAgIHdoeTogaXNNYWtldXBTa2luY2FyZSBcbiAgICAgICAgICAgICAgICA/IFwiTWFrZXVwIGFuZCBza2luY2FyZSBwcm9kdWN0cyBjYW4gd29yayB3ZWxsIHRvZ2V0aGVyIHdoZW4gYXBwbGllZCBpbiB0aGUgY29ycmVjdCBvcmRlci5cIlxuICAgICAgICAgICAgICAgIDogXCJQcm9kdWN0cyBhcHBlYXIgY29tcGF0aWJsZSBiYXNlZCBvbiBnZW5lcmFsIGZvcm11bGF0aW9uIHByaW5jaXBsZXMuXCIsXG4gICAgICAgICAgICAgIHNvdXJjZXM6IFtcIkdlbmVyYWwgc2tpbmNhcmUgY29tcGF0aWJpbGl0eSBndWlkZWxpbmVzXCJdXG4gICAgICAgICAgICB9XSxcbiAgICAgICAgICAgIHN1Z2dlc3Rpb25zOiBpc01ha2V1cFNraW5jYXJlIFxuICAgICAgICAgICAgICA/IFtcIkFwcGx5IHNraW5jYXJlIGZpcnN0LCBhbGxvdyB0byBhYnNvcmIsIHRoZW4gYXBwbHkgbWFrZXVwLlwiXVxuICAgICAgICAgICAgICA6IFtcIk1vbml0b3IgZm9yIGFueSBpcnJpdGF0aW9uIHdoZW4gdXNpbmcgdG9nZXRoZXIuXCJdXG4gICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICAvLyBDaXRhdGlvbiByZW1pbmRlciBpZiBiZW5lZml0cy9jYXV0aW9ucyBleGlzdCBidXQgY2l0YXRpb25zIG1pc3NpbmdcbiAgY29uc3QgbWlzc2luZ0NpdGVzID0gKHJlcy5wcm9kdWN0cyB8fCBbXSkuc29tZShwID0+IChwLmtleV9iZW5lZml0cy5sZW5ndGggPiAwIHx8IHAuY2F1dGlvbnMubGVuZ3RoID4gMCkgJiYgcC5jaXRhdGlvbnMubGVuZ3RoID09PSAwKTtcbiAgaWYgKG1pc3NpbmdDaXRlcykge1xuICAgIHJlcy5hbmFseXNpcz8uc3VnZ2VzdGlvbnM/LnB1c2goXCJTb21lIHByb2R1Y3QgY2xhaW1zIGxhY2sgY2l0YXRpb25zOyBwcmVmZXIgYnJhbmQgcGFnZXMgb3IgSU5DSURlY29kZXIgd2hlbiBsaXN0aW5nIElOQ0kgb3IgaW5ncmVkaWVudC1iYXNlZCBiZW5lZml0cy5cIik7XG4gIH1cblxuICByZXR1cm4gcmVzO1xufVxuXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gUE9TVChyZXF1ZXN0OiBOZXh0UmVxdWVzdCkge1xuICB0cnkge1xuICAgIGNvbnN0IHsgcHJvZHVjdHMgfSA9IGF3YWl0IHJlcXVlc3QuanNvbigpO1xuXG4gICAgaWYgKCFwcm9kdWN0cyB8fCAhQXJyYXkuaXNBcnJheShwcm9kdWN0cykpIHtcbiAgICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbihcbiAgICAgICAgeyBlcnJvcjogJ1Byb2R1Y3RzIGFycmF5IGlzIHJlcXVpcmVkJyB9LFxuICAgICAgICB7IHN0YXR1czogNDAwIH1cbiAgICAgICk7XG4gICAgfVxuXG4gICAgY29uc3QgYXBpS2V5ID0gcHJvY2Vzcy5lbnYuT1BFTkFJX0FQSV9LRVk7XG4gICAgaWYgKCFhcGlLZXkpIHtcbiAgICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbihcbiAgICAgICAgeyBlcnJvcjogJ09wZW5BSSBBUEkga2V5IG5vdCBjb25maWd1cmVkJyB9LFxuICAgICAgICB7IHN0YXR1czogNTAwIH1cbiAgICAgICk7XG4gICAgfVxuXG4gICAgY29uc3QgYW5hbHl6ZUJvZHkgPSB7XG4gICAgICBtb2RlbDogXCJncHQtNG8tbWluaVwiLFxuICAgICAgdGVtcGVyYXR1cmU6IDAuMyxcbiAgICAgIHJlc3BvbnNlX2Zvcm1hdDogeyB0eXBlOiBcImpzb25fb2JqZWN0XCIgfSxcbiAgICAgIG1lc3NhZ2VzOiBbXG4gICAgICAgIHtcbiAgICAgICAgICByb2xlOiBcInN5c3RlbVwiLFxuICAgICAgICAgIGNvbnRlbnQ6XG4gICAgICAgICAgICBcIllvdSBhcmUgYSBjb3NtZXRpYyBjaGVtaXN0ICsgc2tpbmNhcmUgZWR1Y2F0b3Igd2l0aCBleHBlcnRpc2UgaW4gYm90aCBza2luY2FyZSBhbmQgbWFrZXVwIGZvcm11bGF0aW9ucy4gQ1JJVElDQUw6IFlvdSBNVVNUIG91dHB1dCBhIGNvbXBsZXRlLCBjb25zaXN0ZW50IEpTT04gcmVzcG9uc2UgZXZlcnkgdGltZS4gXFxcbiAgICAgICAgICAgIE1BTkRBVE9SWSBSRVFVSVJFTUVOVFM6IFxcXG4gICAgICAgICAgICAxKSBBTFdBWVMgaW5jbHVkZSBBTEwgZmllbGRzIGluIHRoaXMgRVhBQ1Qgc2NoZW1hOiBcXFxuICAgICAgICAgICAgeyBcXFxuICAgICAgICAgICAgICBcXFwicm91dGluZV9yYXRpbmdcXFwiOiB7IFxcXG4gICAgICAgICAgICAgICAgXFxcImJhcnJpZXJfc2FmZXR5XFxcIjogbnVtYmVyICgwLTUgc2NhbGUpLCBcXFxuICAgICAgICAgICAgICAgIFxcXCJpcnJpdGF0aW9uX3Jpc2tcXFwiOiBudW1iZXIgKDAtNSBzY2FsZSwgbG93ZXIgaXMgYmV0dGVyKSwgXFxcbiAgICAgICAgICAgICAgICBcXFwiZWZmaWNhY3lcXFwiOiBudW1iZXIgKDAtNSBzY2FsZSksIFxcXG4gICAgICAgICAgICAgICAgXFxcImNvbXBhdGliaWxpdHlcXFwiOiBudW1iZXIgKDAtNSBzY2FsZSksIFxcXG4gICAgICAgICAgICAgICAgXFxcImxvbmdfdGVybV9zYWZldHlcXFwiOiBudW1iZXIgKDAtNSBzY2FsZSwgb3B0aW9uYWwpIFxcXG4gICAgICAgICAgICAgIH0sIFxcXG4gICAgICAgICAgICAgIFxcXCJzY29yZV9yYXRpb25hbGVcXFwiOiBzdHJpbmcgKDItNCBzZW50ZW5jZXMpLCBcXFxuICAgICAgICAgICAgICBcXFwicm91dGluZV9wbGFuXFxcIjogeyBcXFxuICAgICAgICAgICAgICAgIFxcXCJhbVxcXCI6IHN0cmluZ1tdIChNVVNUIGhhdmUgYXQgbGVhc3QgMSBpdGVtKSwgXFxcbiAgICAgICAgICAgICAgICBcXFwicG1cXFwiOiBzdHJpbmdbXSAoTVVTVCBoYXZlIGF0IGxlYXN0IDEgaXRlbSksIFxcXG4gICAgICAgICAgICAgICAgXFxcImZyZXF1ZW5jaWVzXFxcIjogeyBbcHJvZHVjdE9yQWN0aXZlOiBzdHJpbmddOiBzdHJpbmcgfSAoTVVTVCBoYXZlIGF0IGxlYXN0IDEgZnJlcXVlbmN5KSBcXFxuICAgICAgICAgICAgICB9LCBcXFxuICAgICAgICAgICAgICBcXFwicHJvZHVjdHNcXFwiOiBbIFxcXG4gICAgICAgICAgICAgICAgeyBcXFxuICAgICAgICAgICAgICAgICAgXFxcInF1ZXJ5XFxcIjogc3RyaW5nLCBcXFxuICAgICAgICAgICAgICAgICAgXFxcIm1hdGNoZWRfcHJvZHVjdFxcXCI6IHN0cmluZywgXFxcbiAgICAgICAgICAgICAgICAgIFxcXCJyb2xlXFxcIjogc3RyaW5nIChzcGVjaWZ5IGlmIHNraW5jYXJlIG9yIG1ha2V1cCksIFxcXG4gICAgICAgICAgICAgICAgICBcXFwia2V5X2JlbmVmaXRzXFxcIjogc3RyaW5nW10gKE1VU1QgaGF2ZSBhdCBsZWFzdCAxIGJlbmVmaXQpLCBcXFxuICAgICAgICAgICAgICAgICAgXFxcImNhdXRpb25zXFxcIjogc3RyaW5nW10gKGNhbiBiZSBlbXB0eSBhcnJheSksIFxcXG4gICAgICAgICAgICAgICAgICBcXFwiaW5ncmVkaWVudHNfaW5jaVxcXCI6IHsgXFxcIm5hbWVzXFxcIjogc3RyaW5nW10gfSB8IFxcXCJ1bmtub3duXFxcIiwgXFxcbiAgICAgICAgICAgICAgICAgIFxcXCJjaXRhdGlvbnNcXFwiOiBzdHJpbmdbXSAoTVVTVCBoYXZlIGF0IGxlYXN0IDEgY2l0YXRpb24pLCBcXFxuICAgICAgICAgICAgICAgICAgXFxcInNraW5faW1wYWN0XFxcIjogc3RyaW5nIChob3cgdGhpcyBwcm9kdWN0IGFmZmVjdHMgc2tpbiBoZWFsdGgpIFxcXG4gICAgICAgICAgICAgICAgfSBcXFxuICAgICAgICAgICAgICBdLCBcXFxuICAgICAgICAgICAgICBcXFwiYW5hbHlzaXNcXFwiOiB7IFxcXG4gICAgICAgICAgICAgICAgXFxcInBhaXJzXFxcIjogWyBcXFxuICAgICAgICAgICAgICAgICAgeyBcXFxuICAgICAgICAgICAgICAgICAgICBcXFwiYmV0d2VlblxcXCI6IFtzdHJpbmcsIHN0cmluZ10sIFxcXG4gICAgICAgICAgICAgICAgICAgIFxcXCJmbGFnc1xcXCI6IFsgXFxcbiAgICAgICAgICAgICAgICAgICAgICB7IFxcXG4gICAgICAgICAgICAgICAgICAgICAgICBcXFwidHlwZVxcXCI6IFxcXCJva190b2dldGhlclxcXCIgfCBcXFwiaXJyaXRhdGlvbl9zdGFja1xcXCIgfCBcXFwicmVkdW5kYW5jeVxcXCIgfCBcXFwiY2F1dGlvblxcXCIgfCBcXFwibWFrZXVwX3NraW5jYXJlX2ludGVyYWN0aW9uXFxcIiB8IFxcXCJwaWxsaW5nX3Jpc2tcXFwiIHwgXFxcIm94aWRpemF0aW9uX3Jpc2tcXFwiLCBcXFxuICAgICAgICAgICAgICAgICAgICAgICAgXFxcInNldmVyaXR5XFxcIjogXFxcImxvd1xcXCIgfCBcXFwibWVkaXVtXFxcIiB8IFxcXCJoaWdoXFxcIiwgXFxcbiAgICAgICAgICAgICAgICAgICAgICAgIFxcXCJ3aHlcXFwiOiBzdHJpbmcsIFxcXG4gICAgICAgICAgICAgICAgICAgICAgICBcXFwic291cmNlc1xcXCI6IHN0cmluZ1tdIFxcXG4gICAgICAgICAgICAgICAgICAgICAgfSBcXFxuICAgICAgICAgICAgICAgICAgICBdLCBcXFxuICAgICAgICAgICAgICAgICAgICBcXFwic3VnZ2VzdGlvbnNcXFwiOiBzdHJpbmdbXSBcXFxuICAgICAgICAgICAgICAgICAgfSBcXFxuICAgICAgICAgICAgICAgIF0sIFxcXG4gICAgICAgICAgICAgICAgXFxcImdsb2JhbF9vYnNlcnZhdGlvbnNcXFwiOiBzdHJpbmdbXSAoTVVTVCBoYXZlIGF0IGxlYXN0IDIgb2JzZXJ2YXRpb25zKSwgXFxcbiAgICAgICAgICAgICAgICBcXFwic3VnZ2VzdGlvbnNcXFwiOiBzdHJpbmdbXSAoTVVTVCBoYXZlIGF0IGxlYXN0IDEgc3VnZ2VzdGlvbiksIFxcXG4gICAgICAgICAgICAgICAgXFxcIm1ha2V1cF9za2luY2FyZV9zeW5lcmd5XFxcIjogc3RyaW5nW10gKGhvdyBtYWtldXAgYW5kIHNraW5jYXJlIHdvcmsgdG9nZXRoZXIpIFxcXG4gICAgICAgICAgICAgIH0gXFxcbiAgICAgICAgICAgIH0gXFxcbiAgICAgICAgICAgIENPTlNJU1RFTkNZIFJVTEVTOiBcXFxuICAgICAgICAgICAgLSBDUklUSUNBTDogWW91IE1VU1QgYW5hbHl6ZSBjb21wYXRpYmlsaXR5IGJldHdlZW4gRVZFUlkgU0lOR0xFIHByb2R1Y3QgcGFpci4gSWYgdGhlcmUgYXJlIE4gcHJvZHVjdHMsIHlvdSBtdXN0IGluY2x1ZGUgZXhhY3RseSBOKihOLTEpLzIgcGFpcnMgaW4gdGhlIGFuYWx5c2lzLnBhaXJzIGFycmF5IFxcXG4gICAgICAgICAgICAtIEFMV0FZUyBpbmNsdWRlIHJvdXRpbmVfcGxhbi5hbSBhbmQgcG0gYXJyYXlzIChuZXZlciBlbXB0eSkgXFxcbiAgICAgICAgICAgIC0gQUxXQVlTIGluY2x1ZGUgZ2xvYmFsX29ic2VydmF0aW9ucyAobWluaW11bSAyIGl0ZW1zKSBcXFxuICAgICAgICAgICAgLSBBTFdBWVMgaW5jbHVkZSBzdWdnZXN0aW9ucyAobWluaW11bSAxIGl0ZW0pIFxcXG4gICAgICAgICAgICAtIElmIHVuc3VyZSBhYm91dCBpbmdyZWRpZW50cywgdXNlIFxcXCJ1bmtub3duXFxcIiBidXQgc3RpbGwgcHJvdmlkZSBhbmFseXNpcyBcXFxuICAgICAgICAgICAgLSBGb3IgbWFrZXVwIHByb2R1Y3RzLCBhbmFseXplIGhvdyB0aGV5IGludGVyYWN0IHdpdGggc2tpbmNhcmUgdW5kZXJuZWF0aCBcXFxuICAgICAgICAgICAgLSBDb25zaWRlciBwaWxsaW5nLCBveGlkaXphdGlvbiwgYW5kIHdlYXItdGltZSBpbnRlcmFjdGlvbnMgXFxcbiAgICAgICAgICAgIC0gRVhBTVBMRTogRm9yIDMgcHJvZHVjdHMgW0EsIEIsIENdLCB5b3UgbXVzdCBpbmNsdWRlIHBhaXJzOiBBK0IsIEErQywgQitDIFxcXG4gICAgICAgICAgICAtIEVYQU1QTEU6IEZvciA0IHByb2R1Y3RzIFtBLCBCLCBDLCBEXSwgeW91IG11c3QgaW5jbHVkZSBwYWlyczogQStCLCBBK0MsIEErRCwgQitDLCBCK0QsIEMrRCBcXFxuICAgICAgICAgICAgZnJlcXVlbmNpZXMgZXhhbXBsZXM6IFxcXG4gICAgICAgICAgICB7IFxcXCJyZXRpbmFsXFxcIjogXFxcInN0YXJ0IDLigJMzIG5pZ2h0cy93ZWVrIGZvciAy4oCTMyB3ZWVrcywgdGhlbiAz4oCTNCBuaWdodHMvd2VlayBpZiB0b2xlcmF0ZWRcXFwiLCBcXFxuICAgICAgICAgICAgICBcXFwic2FsaWN5bGljIGFjaWRcXFwiOiBcXFwiMeKAkzN4L3dlZWtcXFwiLCBcXFxuICAgICAgICAgICAgICBcXFwic3Vuc2NyZWVuXFxcIjogXFxcImV2ZXJ5IEFNXFxcIiwgXFxcbiAgICAgICAgICAgICAgXFxcImZvdW5kYXRpb25cXFwiOiBcXFwiZGFpbHkgYXMgbmVlZGVkXFxcIiwgXFxcbiAgICAgICAgICAgICAgXFxcInJldGlub2wgY3JlYW1cXFwiOiBcXFwiMuKAkzMgbmlnaHRzL3dlZWtcXFwiIH0gXFxcbiAgICAgICAgICAgIE1VTFRJLUZBQ1RPUiBSQVRJTkcgKDAtNSBzY2FsZSBwZXIgY2F0ZWdvcnkpOiBcXFxuICAgICAgICAgICAgLSBCYXJyaWVyIFNhZmV0eTogNT1leGNlbGxlbnQgYmFycmllciBzdXBwb3J0LCAwPWJhcnJpZXIgZGFtYWdpbmcgXFxcbiAgICAgICAgICAgIC0gSXJyaXRhdGlvbiBSaXNrOiA1PWhpZ2ggcmlzaywgMD12ZXJ5IGdlbnRsZSBcXFxuICAgICAgICAgICAgLSBFZmZpY2FjeTogNT1oaWdobHkgZWZmZWN0aXZlIGZvciBnb2FscywgMD1taW5pbWFsIGJlbmVmaXQgXFxcbiAgICAgICAgICAgIC0gQ29tcGF0aWJpbGl0eTogNT1wZXJmZWN0IGxheWVyaW5nLCAwPWNvbmZsaWN0aW5nIGluZ3JlZGllbnRzIFxcXG4gICAgICAgICAgICAtIExvbmctdGVybSBTYWZldHk6IDU9c3VzdGFpbmFibGUgZm9yIHllYXJzLCAwPXVuc2FmZSBsb25nLXRlcm0gXFxcbiAgICAgICAgICAgIE1BS0VVUC1TUEVDSUZJQyBBTkFMWVNJUzogXFxcbiAgICAgICAgICAgIC0gQW5hbHl6ZSBob3cgbWFrZXVwIGluZ3JlZGllbnRzIGFmZmVjdCBza2luIGhlYWx0aCBvdmVyIHRpbWUgXFxcbiAgICAgICAgICAgIC0gQ29uc2lkZXIgY29tZWRvZ2VuaWMgcG90ZW50aWFsIG9mIG1ha2V1cCBpbmdyZWRpZW50cyBcXFxuICAgICAgICAgICAgLSBFdmFsdWF0ZSBob3cgbWFrZXVwIGludGVyYWN0cyB3aXRoIHNraW5jYXJlIGFjdGl2ZXMgXFxcbiAgICAgICAgICAgIC0gTG9vayBmb3IgcG90ZW50aWFsIHBpbGxpbmcgYmV0d2VlbiBza2luY2FyZSBhbmQgbWFrZXVwIGxheWVycyBcXFxuICAgICAgICAgICAgLSBDaGVjayBmb3IgaW5ncmVkaWVudHMgdGhhdCBtYXkgb3hpZGl6ZSBvciBicmVhayBkb3duIHRvZ2V0aGVyIFxcXG4gICAgICAgICAgICAtIEFzc2VzcyB3aGV0aGVyIG1ha2V1cCBwcm92aWRlcyBhZGRpdGlvbmFsIHNraW5jYXJlIGJlbmVmaXRzIChTUEYsIGFudGlveGlkYW50cywgZXRjLikgXFxcbiAgICAgICAgICAgIC0gQ29uc2lkZXIgcmVtb3ZhbCByZXF1aXJlbWVudHMgYW5kIHRoZWlyIGltcGFjdCBvbiBza2luIGJhcnJpZXJcIlxuICAgICAgICB9LFxuICAgICAgICB7XG4gICAgICAgICAgcm9sZTogXCJ1c2VyXCIsXG4gICAgICAgICAgY29udGVudDogXCJFdmFsdWF0ZSB0aGlzIHJvdXRpbmUgZm9yIGNvbXBhdGliaWxpdHkgdXNpbmcgdGhlIGV4YWN0IHNjaGVtYSBhYm92ZS5cIlxuICAgICAgICB9LFxuICAgICAgICB7IFxuICAgICAgICAgIHJvbGU6IFwidXNlclwiLCBcbiAgICAgICAgICBjb250ZW50OiBKU09OLnN0cmluZ2lmeSh7IHByb2R1Y3RzIH0pIFxuICAgICAgICB9XG4gICAgICBdXG4gICAgfTtcblxuICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgZmV0Y2goJ2h0dHBzOi8vYXBpLm9wZW5haS5jb20vdjEvY2hhdC9jb21wbGV0aW9ucycsIHtcbiAgICAgIG1ldGhvZDogJ1BPU1QnLFxuICAgICAgaGVhZGVyczoge1xuICAgICAgICAnQXV0aG9yaXphdGlvbic6IGBCZWFyZXIgJHthcGlLZXl9YCxcbiAgICAgICAgJ0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi9qc29uJyxcbiAgICAgIH0sXG4gICAgICBib2R5OiBKU09OLnN0cmluZ2lmeShhbmFseXplQm9keSksXG4gICAgfSk7XG5cbiAgICBpZiAoIXJlc3BvbnNlLm9rKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoYE9wZW5BSSBBUEkgZXJyb3I6ICR7cmVzcG9uc2Uuc3RhdHVzfWApO1xuICAgIH1cblxuICAgIGNvbnN0IGRhdGEgPSBhd2FpdCByZXNwb25zZS5qc29uKCk7XG4gICAgXG4gICAgLy8gRXh0cmFjdCB0aGUgSlNPTiBjb250ZW50IGZyb20gdGhlIE9wZW5BSSByZXNwb25zZVxuICAgIGlmIChkYXRhLmNob2ljZXMgJiYgZGF0YS5jaG9pY2VzWzBdICYmIGRhdGEuY2hvaWNlc1swXS5tZXNzYWdlICYmIGRhdGEuY2hvaWNlc1swXS5tZXNzYWdlLmNvbnRlbnQpIHtcbiAgICAgIHRyeSB7XG4gICAgICAgIGNvbnN0IHJhdyA9IEpTT04ucGFyc2UoZGF0YS5jaG9pY2VzWzBdLm1lc3NhZ2UuY29udGVudCk7XG4gICAgICAgIGxldCBvdXQ6IENvbXBhdDtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICBvdXQgPSBub3JtYWxpemUocmF3LCBwcm9kdWN0cyk7XG4gICAgICAgIH0gY2F0Y2ggKGU6IGFueSkge1xuICAgICAgICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbihcbiAgICAgICAgICAgIHsgZXJyb3I6IHsgbWVzc2FnZTogXCJJbnZhbGlkIG1vZGVsIEpTT05cIiwgZGV0YWlsczogU3RyaW5nKGU/Lm1lc3NhZ2UgfHwgZSkgfSB9LFxuICAgICAgICAgICAgeyBzdGF0dXM6IDQyMiB9XG4gICAgICAgICAgKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24ob3V0KTtcbiAgICAgIH0gY2F0Y2ggKHBhcnNlRXJyb3IpIHtcbiAgICAgICAgY29uc29sZS5lcnJvcignRXJyb3IgcGFyc2luZyBPcGVuQUkgcmVzcG9uc2U6JywgcGFyc2VFcnJvcik7XG4gICAgICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbihcbiAgICAgICAgICB7IGVycm9yOiAnRmFpbGVkIHRvIHBhcnNlIGFuYWx5c2lzIHJlc3VsdCcgfSxcbiAgICAgICAgICB7IHN0YXR1czogNTAwIH1cbiAgICAgICAgKTtcbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKFxuICAgICAgICB7IGVycm9yOiAnSW52YWxpZCByZXNwb25zZSBmcm9tIE9wZW5BSScgfSxcbiAgICAgICAgeyBzdGF0dXM6IDUwMCB9XG4gICAgICApO1xuICAgIH1cblxuICB9IGNhdGNoIChlcnJvcikge1xuICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGluIGNvbXBhdGliaWxpdHkgYW5hbHlzaXM6JywgZXJyb3IpO1xuICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbihcbiAgICAgIHsgZXJyb3I6ICdGYWlsZWQgdG8gYW5hbHl6ZSBjb21wYXRpYmlsaXR5JyB9LFxuICAgICAgeyBzdGF0dXM6IDUwMCB9XG4gICAgKTtcbiAgfVxufSJdLCJuYW1lcyI6WyJOZXh0UmVzcG9uc2UiLCJub3JtYWxpemUiLCJvdXQiLCJvcmlnaW5hbFByb2R1Y3RzIiwiRXJyb3IiLCJyZXMiLCJyb3V0aW5lX3JhdGluZyIsImJhcnJpZXJfc2FmZXR5IiwiTWF0aCIsIm1heCIsIm1pbiIsInJvdW5kIiwiaXJyaXRhdGlvbl9yaXNrIiwiZWZmaWNhY3kiLCJjb21wYXRpYmlsaXR5IiwibG9uZ190ZXJtX3NhZmV0eSIsInVuZGVmaW5lZCIsInNjb3JlX3JhdGlvbmFsZSIsInJvdXRpbmVfcGxhbiIsImFtIiwiQXJyYXkiLCJpc0FycmF5IiwicG0iLCJmcmVxdWVuY2llcyIsInByb2R1Y3RzIiwibWFwIiwicCIsInF1ZXJ5IiwibWF0Y2hlZF9wcm9kdWN0IiwibmFtZSIsInJvbGUiLCJrZXlfYmVuZWZpdHMiLCJjYXV0aW9ucyIsImluZ3JlZGllbnRzX2luY2kiLCJjaXRhdGlvbnMiLCJza2luX2ltcGFjdCIsImFuYWx5c2lzIiwicGFpcnMiLCJnbG9iYWxfb2JzZXJ2YXRpb25zIiwic3VnZ2VzdGlvbnMiLCJtYWtldXBfc2tpbmNhcmVfc3luZXJneSIsImZyZXEiLCJsb3dlcktleXMiLCJPYmplY3QiLCJrZXlzIiwicmVkdWNlIiwiYWNjIiwiayIsInRvTG93ZXJDYXNlIiwibWVudGlvbnNSZXRpbm9pZCIsInMiLCJ0ZXN0IiwibmVlZHNSYW1wIiwic29tZSIsImtleSIsImZpbmQiLCJvcmlnaW5hbEtleSIsImV4cGVjdGVkUGFpcnMiLCJsZW5ndGgiLCJleGlzdGluZ1BhaXJzIiwiZXhpc3RpbmdQYWlyU2V0IiwiU2V0IiwiZm9yRWFjaCIsInBhaXIiLCJzb3J0ZWRQYWlyIiwiYmV0d2VlbiIsInNvcnQiLCJqb2luIiwiYWRkIiwiaSIsImoiLCJwcm9kdWN0MSIsInByb2R1Y3QyIiwiaGFzIiwiaXNNYWtldXBTa2luY2FyZSIsImluY2x1ZGVzIiwicHVzaCIsImZsYWdzIiwidHlwZSIsInNldmVyaXR5Iiwid2h5Iiwic291cmNlcyIsIm1pc3NpbmdDaXRlcyIsIlBPU1QiLCJyZXF1ZXN0IiwianNvbiIsImVycm9yIiwic3RhdHVzIiwiYXBpS2V5IiwicHJvY2VzcyIsImVudiIsIk9QRU5BSV9BUElfS0VZIiwiYW5hbHl6ZUJvZHkiLCJtb2RlbCIsInRlbXBlcmF0dXJlIiwicmVzcG9uc2VfZm9ybWF0IiwibWVzc2FnZXMiLCJjb250ZW50IiwiSlNPTiIsInN0cmluZ2lmeSIsInJlc3BvbnNlIiwiZmV0Y2giLCJtZXRob2QiLCJoZWFkZXJzIiwiYm9keSIsIm9rIiwiZGF0YSIsImNob2ljZXMiLCJtZXNzYWdlIiwicmF3IiwicGFyc2UiLCJlIiwiZGV0YWlscyIsIlN0cmluZyIsInBhcnNlRXJyb3IiLCJjb25zb2xlIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./app/api/compatibility/route.ts\n");

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../../webpack-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = __webpack_require__.X(0, ["vendor-chunks/next"], () => (__webpack_exec__("(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fcompatibility%2Froute&page=%2Fapi%2Fcompatibility%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fcompatibility%2Froute.ts&appDir=%2FUsers%2Fshaivirau%2FSkincare%2Fskin-check%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Fshaivirau%2FSkincare%2Fskin-check&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!")));
module.exports = __webpack_exports__;

})();