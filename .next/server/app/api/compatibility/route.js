"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "app/api/compatibility/route";
exports.ids = ["app/api/compatibility/route"];
exports.modules = {

/***/ "next/dist/compiled/next-server/app-route.runtime.dev.js":
/*!**************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-route.runtime.dev.js" ***!
  \**************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/app-route.runtime.dev.js");

/***/ }),

/***/ "(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fcompatibility%2Froute&page=%2Fapi%2Fcompatibility%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fcompatibility%2Froute.ts&appDir=%2FUsers%2Fshaivirau%2FSkincare%2Fskin-check%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Fshaivirau%2FSkincare%2Fskin-check&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!":
/*!***********************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fcompatibility%2Froute&page=%2Fapi%2Fcompatibility%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fcompatibility%2Froute.ts&appDir=%2FUsers%2Fshaivirau%2FSkincare%2Fskin-check%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Fshaivirau%2FSkincare%2Fskin-check&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D! ***!
  \***********************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   headerHooks: () => (/* binding */ headerHooks),\n/* harmony export */   originalPathname: () => (/* binding */ originalPathname),\n/* harmony export */   patchFetch: () => (/* binding */ patchFetch),\n/* harmony export */   requestAsyncStorage: () => (/* binding */ requestAsyncStorage),\n/* harmony export */   routeModule: () => (/* binding */ routeModule),\n/* harmony export */   serverHooks: () => (/* binding */ serverHooks),\n/* harmony export */   staticGenerationAsyncStorage: () => (/* binding */ staticGenerationAsyncStorage),\n/* harmony export */   staticGenerationBailout: () => (/* binding */ staticGenerationBailout)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/future/route-modules/app-route/module.compiled */ \"(rsc)/./node_modules/next/dist/server/future/route-modules/app-route/module.compiled.js\");\n/* harmony import */ var next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/dist/server/future/route-kind */ \"(rsc)/./node_modules/next/dist/server/future/route-kind.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next/dist/server/lib/patch-fetch */ \"(rsc)/./node_modules/next/dist/server/lib/patch-fetch.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var _Users_shaivirau_Skincare_skin_check_app_api_compatibility_route_ts__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./app/api/compatibility/route.ts */ \"(rsc)/./app/api/compatibility/route.ts\");\n\n\n\n\n// We inject the nextConfigOutput here so that we can use them in the route\n// module.\nconst nextConfigOutput = \"\"\nconst routeModule = new next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__.AppRouteRouteModule({\n    definition: {\n        kind: next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__.RouteKind.APP_ROUTE,\n        page: \"/api/compatibility/route\",\n        pathname: \"/api/compatibility\",\n        filename: \"route\",\n        bundlePath: \"app/api/compatibility/route\"\n    },\n    resolvedPagePath: \"/Users/shaivirau/Skincare/skin-check/app/api/compatibility/route.ts\",\n    nextConfigOutput,\n    userland: _Users_shaivirau_Skincare_skin_check_app_api_compatibility_route_ts__WEBPACK_IMPORTED_MODULE_3__\n});\n// Pull out the exports that we need to expose from the module. This should\n// be eliminated when we've moved the other routes to the new format. These\n// are used to hook into the route.\nconst { requestAsyncStorage, staticGenerationAsyncStorage, serverHooks, headerHooks, staticGenerationBailout } = routeModule;\nconst originalPathname = \"/api/compatibility/route\";\nfunction patchFetch() {\n    return (0,next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__.patchFetch)({\n        serverHooks,\n        staticGenerationAsyncStorage\n    });\n}\n\n\n//# sourceMappingURL=app-route.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvbmV4dC9kaXN0L2J1aWxkL3dlYnBhY2svbG9hZGVycy9uZXh0LWFwcC1sb2FkZXIuanM/bmFtZT1hcHAlMkZhcGklMkZjb21wYXRpYmlsaXR5JTJGcm91dGUmcGFnZT0lMkZhcGklMkZjb21wYXRpYmlsaXR5JTJGcm91dGUmYXBwUGF0aHM9JnBhZ2VQYXRoPXByaXZhdGUtbmV4dC1hcHAtZGlyJTJGYXBpJTJGY29tcGF0aWJpbGl0eSUyRnJvdXRlLnRzJmFwcERpcj0lMkZVc2VycyUyRnNoYWl2aXJhdSUyRlNraW5jYXJlJTJGc2tpbi1jaGVjayUyRmFwcCZwYWdlRXh0ZW5zaW9ucz10c3gmcGFnZUV4dGVuc2lvbnM9dHMmcGFnZUV4dGVuc2lvbnM9anN4JnBhZ2VFeHRlbnNpb25zPWpzJnJvb3REaXI9JTJGVXNlcnMlMkZzaGFpdmlyYXUlMkZTa2luY2FyZSUyRnNraW4tY2hlY2smaXNEZXY9dHJ1ZSZ0c2NvbmZpZ1BhdGg9dHNjb25maWcuanNvbiZiYXNlUGF0aD0mYXNzZXRQcmVmaXg9Jm5leHRDb25maWdPdXRwdXQ9JnByZWZlcnJlZFJlZ2lvbj0mbWlkZGxld2FyZUNvbmZpZz1lMzAlM0QhIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBQXNHO0FBQ3ZDO0FBQ2M7QUFDbUI7QUFDaEc7QUFDQTtBQUNBO0FBQ0Esd0JBQXdCLGdIQUFtQjtBQUMzQztBQUNBLGNBQWMseUVBQVM7QUFDdkI7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBLFlBQVk7QUFDWixDQUFDO0FBQ0Q7QUFDQTtBQUNBO0FBQ0EsUUFBUSx1R0FBdUc7QUFDL0c7QUFDQTtBQUNBLFdBQVcsNEVBQVc7QUFDdEI7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUM2Sjs7QUFFN0oiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9za2luLWNoZWNrLz85NWRkIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IEFwcFJvdXRlUm91dGVNb2R1bGUgfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci9mdXR1cmUvcm91dGUtbW9kdWxlcy9hcHAtcm91dGUvbW9kdWxlLmNvbXBpbGVkXCI7XG5pbXBvcnQgeyBSb3V0ZUtpbmQgfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci9mdXR1cmUvcm91dGUta2luZFwiO1xuaW1wb3J0IHsgcGF0Y2hGZXRjaCBhcyBfcGF0Y2hGZXRjaCB9IGZyb20gXCJuZXh0L2Rpc3Qvc2VydmVyL2xpYi9wYXRjaC1mZXRjaFwiO1xuaW1wb3J0ICogYXMgdXNlcmxhbmQgZnJvbSBcIi9Vc2Vycy9zaGFpdmlyYXUvU2tpbmNhcmUvc2tpbi1jaGVjay9hcHAvYXBpL2NvbXBhdGliaWxpdHkvcm91dGUudHNcIjtcbi8vIFdlIGluamVjdCB0aGUgbmV4dENvbmZpZ091dHB1dCBoZXJlIHNvIHRoYXQgd2UgY2FuIHVzZSB0aGVtIGluIHRoZSByb3V0ZVxuLy8gbW9kdWxlLlxuY29uc3QgbmV4dENvbmZpZ091dHB1dCA9IFwiXCJcbmNvbnN0IHJvdXRlTW9kdWxlID0gbmV3IEFwcFJvdXRlUm91dGVNb2R1bGUoe1xuICAgIGRlZmluaXRpb246IHtcbiAgICAgICAga2luZDogUm91dGVLaW5kLkFQUF9ST1VURSxcbiAgICAgICAgcGFnZTogXCIvYXBpL2NvbXBhdGliaWxpdHkvcm91dGVcIixcbiAgICAgICAgcGF0aG5hbWU6IFwiL2FwaS9jb21wYXRpYmlsaXR5XCIsXG4gICAgICAgIGZpbGVuYW1lOiBcInJvdXRlXCIsXG4gICAgICAgIGJ1bmRsZVBhdGg6IFwiYXBwL2FwaS9jb21wYXRpYmlsaXR5L3JvdXRlXCJcbiAgICB9LFxuICAgIHJlc29sdmVkUGFnZVBhdGg6IFwiL1VzZXJzL3NoYWl2aXJhdS9Ta2luY2FyZS9za2luLWNoZWNrL2FwcC9hcGkvY29tcGF0aWJpbGl0eS9yb3V0ZS50c1wiLFxuICAgIG5leHRDb25maWdPdXRwdXQsXG4gICAgdXNlcmxhbmRcbn0pO1xuLy8gUHVsbCBvdXQgdGhlIGV4cG9ydHMgdGhhdCB3ZSBuZWVkIHRvIGV4cG9zZSBmcm9tIHRoZSBtb2R1bGUuIFRoaXMgc2hvdWxkXG4vLyBiZSBlbGltaW5hdGVkIHdoZW4gd2UndmUgbW92ZWQgdGhlIG90aGVyIHJvdXRlcyB0byB0aGUgbmV3IGZvcm1hdC4gVGhlc2Vcbi8vIGFyZSB1c2VkIHRvIGhvb2sgaW50byB0aGUgcm91dGUuXG5jb25zdCB7IHJlcXVlc3RBc3luY1N0b3JhZ2UsIHN0YXRpY0dlbmVyYXRpb25Bc3luY1N0b3JhZ2UsIHNlcnZlckhvb2tzLCBoZWFkZXJIb29rcywgc3RhdGljR2VuZXJhdGlvbkJhaWxvdXQgfSA9IHJvdXRlTW9kdWxlO1xuY29uc3Qgb3JpZ2luYWxQYXRobmFtZSA9IFwiL2FwaS9jb21wYXRpYmlsaXR5L3JvdXRlXCI7XG5mdW5jdGlvbiBwYXRjaEZldGNoKCkge1xuICAgIHJldHVybiBfcGF0Y2hGZXRjaCh7XG4gICAgICAgIHNlcnZlckhvb2tzLFxuICAgICAgICBzdGF0aWNHZW5lcmF0aW9uQXN5bmNTdG9yYWdlXG4gICAgfSk7XG59XG5leHBvcnQgeyByb3V0ZU1vZHVsZSwgcmVxdWVzdEFzeW5jU3RvcmFnZSwgc3RhdGljR2VuZXJhdGlvbkFzeW5jU3RvcmFnZSwgc2VydmVySG9va3MsIGhlYWRlckhvb2tzLCBzdGF0aWNHZW5lcmF0aW9uQmFpbG91dCwgb3JpZ2luYWxQYXRobmFtZSwgcGF0Y2hGZXRjaCwgIH07XG5cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWFwcC1yb3V0ZS5qcy5tYXAiXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fcompatibility%2Froute&page=%2Fapi%2Fcompatibility%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fcompatibility%2Froute.ts&appDir=%2FUsers%2Fshaivirau%2FSkincare%2Fskin-check%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Fshaivirau%2FSkincare%2Fskin-check&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!\n");

/***/ }),

/***/ "(rsc)/./app/api/compatibility/route.ts":
/*!****************************************!*\
  !*** ./app/api/compatibility/route.ts ***!
  \****************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   POST: () => (/* binding */ POST)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/web/exports/next-response */ \"(rsc)/./node_modules/next/dist/server/web/exports/next-response.js\");\n\nfunction normalize(out) {\n    // Basic shape\n    if (typeof out !== \"object\" || out === null) throw new Error(\"Bad JSON\");\n    const res = out;\n    // Clamp score\n    if (typeof res.score !== \"number\" || Number.isNaN(res.score)) res.score = 0;\n    res.score = Math.max(0, Math.min(100, Math.round(res.score)));\n    // Frequencies guardrail for retinoids\n    const freq = res.routine_plan?.frequencies ?? {};\n    const lowerKeys = Object.keys(freq).reduce((acc, k)=>{\n        acc[k.toLowerCase()] = k;\n        return acc;\n    }, {});\n    const mentionsRetinoid = (s)=>/retin(al|ol)|retinoid/i.test(s);\n    const needsRamp = Object.keys(lowerKeys).some((k)=>mentionsRetinoid(k)) || (res.products || []).some((p)=>mentionsRetinoid(p.role) || mentionsRetinoid(p.matched_product));\n    if (needsRamp) {\n        const key = Object.keys(lowerKeys).find((k)=>mentionsRetinoid(k)) ?? \"retinal\";\n        const originalKey = lowerKeys[key] ?? key;\n        freq[originalKey] = \"start 2–3 nights/week for 2–3 weeks, then 3–4 nights/week if tolerated\";\n        res.routine_plan = {\n            ...res.routine_plan || {},\n            frequencies: freq\n        };\n    }\n    // Citation reminder if benefits/cautions exist but citations missing\n    const missingCites = (res.products || []).some((p)=>(p.key_benefits?.length || p.cautions?.length) && (!p.citations || p.citations.length === 0));\n    if (missingCites) {\n        res.analysis = res.analysis || {};\n        res.analysis.suggestions = [\n            ...res.analysis.suggestions || [],\n            \"Some product claims lack citations; prefer brand pages or INCIDecoder when listing INCI or ingredient-based benefits.\"\n        ];\n    }\n    return res;\n}\nasync function POST(request) {\n    try {\n        const { products } = await request.json();\n        if (!products || !Array.isArray(products)) {\n            return next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_0__[\"default\"].json({\n                error: \"Products array is required\"\n            }, {\n                status: 400\n            });\n        }\n        const apiKey = process.env.OPENAI_API_KEY;\n        if (!apiKey) {\n            return next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_0__[\"default\"].json({\n                error: \"OpenAI API key not configured\"\n            }, {\n                status: 500\n            });\n        }\n        const analyzeBody = {\n            model: \"gpt-4o-mini\",\n            temperature: 0.3,\n            response_format: {\n                type: \"json_object\"\n            },\n            messages: [\n                {\n                    role: \"system\",\n                    content: 'You are a cosmetic chemist + skincare educator. STRICT RULES:             1) Output ONLY JSON using this EXACT schema:             {               \"score\": number (0-100 ONLY, never 1-10),               \"score_rationale\": string (2-4 sentences),               \"routine_plan\": {                 \"am\": string[],                 \"pm\": string[],                 \"frequencies\": { [productOrActive: string]: string }               },               \"products\": [                 {                   \"query\": string,                   \"matched_product\": string,                   \"role\": string,                   \"key_benefits\": string[] (MUST be ingredient-based),                   \"cautions\": string[] (MUST be ingredient-based),                   \"ingredients_inci\": { \"names\": string[] } | \"unknown\",                   \"citations\": string[] (official brand sites or INCIDecoder)                 }               ],               \"analysis\": {                 \"pairs\": [                   {                     \"between\": [string, string],                     \"flags\": [                       {                         \"type\": \"ok_together\" | \"irritation_stack\" | \"redundancy\" | \"caution\",                         \"severity\": \"low\" | \"medium\" | \"high\",                         \"why\": string,                         \"sources\": string[]                       }                     ],                     \"suggestions\": string[]                   }                 ],                 \"global_observations\": string[],                 \"suggestions\": string[]               }             }             frequencies examples:             { \"retinal\": \"start 2–3 nights/week for 2–3 weeks, then 3–4 nights/week if tolerated\",               \"salicylic acid\": \"1–3x/week\",               \"sunscreen\": \"every AM\" }             2) SCORING RULES (0-100 scale):             - Base score: 75             - Penalties: -25 (high severity), -12 (medium), -6 (low)             - Bonuses: +5 (sunscreen), +5 (soothing/buffers)             3) INGREDIENT REQUIREMENTS:             - key_benefits and cautions MUST cite specific ingredients (retinol, niacinamide, etc.)             - NO generic claims like \"anti-aging\" without ingredient basis             - If you cannot retrieve a credible INCI list from brand or a reputable ingredient database (e.g., INCIDecoder), set ingredients_inci to \"unknown\". Do NOT invent INCI.             - If you recommend daily retinal/retinol, include a ramp schedule instead (start 2–3 nights/week).             - If official INCI not found, set ingredients_inci to \"unknown\" and still provide brand URL; optionally add an ingredient DB URL if available.             4) PAIR FLAGS: Each flag MUST include type, severity, why, and sources             5) Do not invent unverifiable claims. Use brand sites or INCIDecoder. If unknown, say \\'unknown\\'.'\n                },\n                {\n                    role: \"user\",\n                    content: \"Evaluate this routine for compatibility using the exact schema above.\"\n                },\n                {\n                    role: \"user\",\n                    content: JSON.stringify({\n                        products\n                    })\n                }\n            ]\n        };\n        const response = await fetch(\"https://api.openai.com/v1/chat/completions\", {\n            method: \"POST\",\n            headers: {\n                \"Authorization\": `Bearer ${apiKey}`,\n                \"Content-Type\": \"application/json\"\n            },\n            body: JSON.stringify(analyzeBody)\n        });\n        if (!response.ok) {\n            throw new Error(`OpenAI API error: ${response.status}`);\n        }\n        const data = await response.json();\n        // Extract the JSON content from the OpenAI response\n        if (data.choices && data.choices[0] && data.choices[0].message && data.choices[0].message.content) {\n            try {\n                const raw = JSON.parse(data.choices[0].message.content);\n                let out;\n                try {\n                    out = normalize(raw);\n                } catch (e) {\n                    return next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_0__[\"default\"].json({\n                        error: {\n                            message: \"Invalid model JSON\",\n                            details: String(e?.message || e)\n                        }\n                    }, {\n                        status: 422\n                    });\n                }\n                return next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_0__[\"default\"].json(out);\n            } catch (parseError) {\n                console.error(\"Error parsing OpenAI response:\", parseError);\n                return next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_0__[\"default\"].json({\n                    error: \"Failed to parse analysis result\"\n                }, {\n                    status: 500\n                });\n            }\n        } else {\n            return next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_0__[\"default\"].json({\n                error: \"Invalid response from OpenAI\"\n            }, {\n                status: 500\n            });\n        }\n    } catch (error) {\n        console.error(\"Error in compatibility analysis:\", error);\n        return next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_0__[\"default\"].json({\n            error: \"Failed to analyze compatibility\"\n        }, {\n            status: 500\n        });\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9hcHAvYXBpL2NvbXBhdGliaWxpdHkvcm91dGUudHMiLCJtYXBwaW5ncyI6Ijs7Ozs7QUFBd0Q7QUFleEQsU0FBU0MsVUFBVUMsR0FBUTtJQUN6QixjQUFjO0lBQ2QsSUFBSSxPQUFPQSxRQUFRLFlBQVlBLFFBQVEsTUFBTSxNQUFNLElBQUlDLE1BQU07SUFDN0QsTUFBTUMsTUFBTUY7SUFFWixjQUFjO0lBQ2QsSUFBSSxPQUFPRSxJQUFJQyxLQUFLLEtBQUssWUFBWUMsT0FBT0MsS0FBSyxDQUFDSCxJQUFJQyxLQUFLLEdBQUdELElBQUlDLEtBQUssR0FBRztJQUMxRUQsSUFBSUMsS0FBSyxHQUFHRyxLQUFLQyxHQUFHLENBQUMsR0FBR0QsS0FBS0UsR0FBRyxDQUFDLEtBQUtGLEtBQUtHLEtBQUssQ0FBQ1AsSUFBSUMsS0FBSztJQUUxRCxzQ0FBc0M7SUFDdEMsTUFBTU8sT0FBT1IsSUFBSVMsWUFBWSxFQUFFQyxlQUFlLENBQUM7SUFDL0MsTUFBTUMsWUFBWUMsT0FBT0MsSUFBSSxDQUFDTCxNQUFNTSxNQUFNLENBQUMsQ0FBQ0MsS0FBSUM7UUFBTUQsR0FBRyxDQUFDQyxFQUFFQyxXQUFXLEdBQUcsR0FBR0Q7UUFBRyxPQUFPRDtJQUFLLEdBQUcsQ0FBQztJQUNoRyxNQUFNRyxtQkFBbUIsQ0FBQ0MsSUFBVyx5QkFBeUJDLElBQUksQ0FBQ0Q7SUFDbkUsTUFBTUUsWUFBWVQsT0FBT0MsSUFBSSxDQUFDRixXQUFXVyxJQUFJLENBQUNOLENBQUFBLElBQUdFLGlCQUFpQkYsT0FDaEUsQ0FBQ2hCLElBQUl1QixRQUFRLElBQUUsRUFBRSxFQUFFRCxJQUFJLENBQUNFLENBQUFBLElBQUdOLGlCQUFpQk0sRUFBRUMsSUFBSSxLQUFHUCxpQkFBaUJNLEVBQUVFLGVBQWU7SUFFekYsSUFBSUwsV0FBVztRQUNiLE1BQU1NLE1BQU1mLE9BQU9DLElBQUksQ0FBQ0YsV0FBV2lCLElBQUksQ0FBQ1osQ0FBQUEsSUFBR0UsaUJBQWlCRixPQUFPO1FBQ25FLE1BQU1hLGNBQWNsQixTQUFTLENBQUNnQixJQUFJLElBQUlBO1FBQ3RDbkIsSUFBSSxDQUFDcUIsWUFBWSxHQUFHO1FBQ3BCN0IsSUFBSVMsWUFBWSxHQUFHO1lBQUUsR0FBSVQsSUFBSVMsWUFBWSxJQUFFLENBQUMsQ0FBQztZQUFHQyxhQUFhRjtRQUFLO0lBQ3BFO0lBRUEscUVBQXFFO0lBQ3JFLE1BQU1zQixlQUFlLENBQUM5QixJQUFJdUIsUUFBUSxJQUFFLEVBQUUsRUFBRUQsSUFBSSxDQUFDRSxDQUFBQSxJQUFLLENBQUNBLEVBQUVPLFlBQVksRUFBRUMsVUFBVVIsRUFBRVMsUUFBUSxFQUFFRCxNQUFLLEtBQU8sRUFBQ1IsRUFBRVUsU0FBUyxJQUFJVixFQUFFVSxTQUFTLENBQUNGLE1BQU0sS0FBSztJQUM1SSxJQUFJRixjQUFjO1FBQ2hCOUIsSUFBSW1DLFFBQVEsR0FBR25DLElBQUltQyxRQUFRLElBQUksQ0FBQztRQUNoQ25DLElBQUltQyxRQUFRLENBQUNDLFdBQVcsR0FBRztlQUFLcEMsSUFBSW1DLFFBQVEsQ0FBQ0MsV0FBVyxJQUFFLEVBQUU7WUFBRztTQUF3SDtJQUN6TDtJQUVBLE9BQU9wQztBQUNUO0FBRU8sZUFBZXFDLEtBQUtDLE9BQW9CO0lBQzdDLElBQUk7UUFDRixNQUFNLEVBQUVmLFFBQVEsRUFBRSxHQUFHLE1BQU1lLFFBQVFDLElBQUk7UUFFdkMsSUFBSSxDQUFDaEIsWUFBWSxDQUFDaUIsTUFBTUMsT0FBTyxDQUFDbEIsV0FBVztZQUN6QyxPQUFPM0Isa0ZBQVlBLENBQUMyQyxJQUFJLENBQ3RCO2dCQUFFRyxPQUFPO1lBQTZCLEdBQ3RDO2dCQUFFQyxRQUFRO1lBQUk7UUFFbEI7UUFFQSxNQUFNQyxTQUFTQyxRQUFRQyxHQUFHLENBQUNDLGNBQWM7UUFDekMsSUFBSSxDQUFDSCxRQUFRO1lBQ1gsT0FBT2hELGtGQUFZQSxDQUFDMkMsSUFBSSxDQUN0QjtnQkFBRUcsT0FBTztZQUFnQyxHQUN6QztnQkFBRUMsUUFBUTtZQUFJO1FBRWxCO1FBRUEsTUFBTUssY0FBYztZQUNsQkMsT0FBTztZQUNQQyxhQUFhO1lBQ2JDLGlCQUFpQjtnQkFBRUMsTUFBTTtZQUFjO1lBQ3ZDQyxVQUFVO2dCQUNSO29CQUNFNUIsTUFBTTtvQkFDTjZCLFNBQ0U7Z0JBd0RKO2dCQUNBO29CQUNFN0IsTUFBTTtvQkFDTjZCLFNBQVM7Z0JBQ1g7Z0JBQ0E7b0JBQ0U3QixNQUFNO29CQUNONkIsU0FBU0MsS0FBS0MsU0FBUyxDQUFDO3dCQUFFakM7b0JBQVM7Z0JBQ3JDO2FBQ0Q7UUFDSDtRQUVBLE1BQU1rQyxXQUFXLE1BQU1DLE1BQU0sOENBQThDO1lBQ3pFQyxRQUFRO1lBQ1JDLFNBQVM7Z0JBQ1AsaUJBQWlCLENBQUMsT0FBTyxFQUFFaEIsT0FBTyxDQUFDO2dCQUNuQyxnQkFBZ0I7WUFDbEI7WUFDQWlCLE1BQU1OLEtBQUtDLFNBQVMsQ0FBQ1I7UUFDdkI7UUFFQSxJQUFJLENBQUNTLFNBQVNLLEVBQUUsRUFBRTtZQUNoQixNQUFNLElBQUkvRCxNQUFNLENBQUMsa0JBQWtCLEVBQUUwRCxTQUFTZCxNQUFNLENBQUMsQ0FBQztRQUN4RDtRQUVBLE1BQU1vQixPQUFPLE1BQU1OLFNBQVNsQixJQUFJO1FBRWhDLG9EQUFvRDtRQUNwRCxJQUFJd0IsS0FBS0MsT0FBTyxJQUFJRCxLQUFLQyxPQUFPLENBQUMsRUFBRSxJQUFJRCxLQUFLQyxPQUFPLENBQUMsRUFBRSxDQUFDQyxPQUFPLElBQUlGLEtBQUtDLE9BQU8sQ0FBQyxFQUFFLENBQUNDLE9BQU8sQ0FBQ1gsT0FBTyxFQUFFO1lBQ2pHLElBQUk7Z0JBQ0YsTUFBTVksTUFBTVgsS0FBS1ksS0FBSyxDQUFDSixLQUFLQyxPQUFPLENBQUMsRUFBRSxDQUFDQyxPQUFPLENBQUNYLE9BQU87Z0JBQ3RELElBQUl4RDtnQkFDSixJQUFJO29CQUNGQSxNQUFNRCxVQUFVcUU7Z0JBQ2xCLEVBQUUsT0FBT0UsR0FBUTtvQkFDZixPQUFPeEUsa0ZBQVlBLENBQUMyQyxJQUFJLENBQ3RCO3dCQUFFRyxPQUFPOzRCQUFFdUIsU0FBUzs0QkFBc0JJLFNBQVNDLE9BQU9GLEdBQUdILFdBQVdHO3dCQUFHO29CQUFFLEdBQzdFO3dCQUFFekIsUUFBUTtvQkFBSTtnQkFFbEI7Z0JBQ0EsT0FBTy9DLGtGQUFZQSxDQUFDMkMsSUFBSSxDQUFDekM7WUFDM0IsRUFBRSxPQUFPeUUsWUFBWTtnQkFDbkJDLFFBQVE5QixLQUFLLENBQUMsa0NBQWtDNkI7Z0JBQ2hELE9BQU8zRSxrRkFBWUEsQ0FBQzJDLElBQUksQ0FDdEI7b0JBQUVHLE9BQU87Z0JBQWtDLEdBQzNDO29CQUFFQyxRQUFRO2dCQUFJO1lBRWxCO1FBQ0YsT0FBTztZQUNMLE9BQU8vQyxrRkFBWUEsQ0FBQzJDLElBQUksQ0FDdEI7Z0JBQUVHLE9BQU87WUFBK0IsR0FDeEM7Z0JBQUVDLFFBQVE7WUFBSTtRQUVsQjtJQUVGLEVBQUUsT0FBT0QsT0FBTztRQUNkOEIsUUFBUTlCLEtBQUssQ0FBQyxvQ0FBb0NBO1FBQ2xELE9BQU85QyxrRkFBWUEsQ0FBQzJDLElBQUksQ0FDdEI7WUFBRUcsT0FBTztRQUFrQyxHQUMzQztZQUFFQyxRQUFRO1FBQUk7SUFFbEI7QUFDRiIsInNvdXJjZXMiOlsid2VicGFjazovL3NraW4tY2hlY2svLi9hcHAvYXBpL2NvbXBhdGliaWxpdHkvcm91dGUudHM/MDcxMSJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBOZXh0UmVxdWVzdCwgTmV4dFJlc3BvbnNlIH0gZnJvbSAnbmV4dC9zZXJ2ZXInO1xuXG50eXBlIENvbXBhdCA9IHtcbiAgc2NvcmU6IG51bWJlcjtcbiAgc2NvcmVfcmF0aW9uYWxlPzogc3RyaW5nO1xuICByb3V0aW5lX3BsYW4/OiB7IGFtPzogc3RyaW5nW107IHBtPzogc3RyaW5nW107IGZyZXF1ZW5jaWVzPzogUmVjb3JkPHN0cmluZyxzdHJpbmc+IH07XG4gIHByb2R1Y3RzPzogQXJyYXk8e1xuICAgIHF1ZXJ5OiBzdHJpbmc7IG1hdGNoZWRfcHJvZHVjdDogc3RyaW5nOyByb2xlOiBzdHJpbmc7XG4gICAga2V5X2JlbmVmaXRzOiBzdHJpbmdbXTsgY2F1dGlvbnM6IHN0cmluZ1tdO1xuICAgIGluZ3JlZGllbnRzX2luY2k6IHsgbmFtZXM6IHN0cmluZ1tdIH0gfCBcInVua25vd25cIjtcbiAgICBjaXRhdGlvbnM6IHN0cmluZ1tdO1xuICB9PjtcbiAgYW5hbHlzaXM/OiB7IGdsb2JhbF9vYnNlcnZhdGlvbnM/OiBzdHJpbmdbXTsgc3VnZ2VzdGlvbnM/OiBzdHJpbmdbXTsgcGFpcnM/OiBhbnlbXSB9O1xufTtcblxuZnVuY3Rpb24gbm9ybWFsaXplKG91dDogYW55KTogQ29tcGF0IHtcbiAgLy8gQmFzaWMgc2hhcGVcbiAgaWYgKHR5cGVvZiBvdXQgIT09IFwib2JqZWN0XCIgfHwgb3V0ID09PSBudWxsKSB0aHJvdyBuZXcgRXJyb3IoXCJCYWQgSlNPTlwiKTtcbiAgY29uc3QgcmVzID0gb3V0IGFzIENvbXBhdDtcblxuICAvLyBDbGFtcCBzY29yZVxuICBpZiAodHlwZW9mIHJlcy5zY29yZSAhPT0gXCJudW1iZXJcIiB8fCBOdW1iZXIuaXNOYU4ocmVzLnNjb3JlKSkgcmVzLnNjb3JlID0gMDtcbiAgcmVzLnNjb3JlID0gTWF0aC5tYXgoMCwgTWF0aC5taW4oMTAwLCBNYXRoLnJvdW5kKHJlcy5zY29yZSkpKTtcblxuICAvLyBGcmVxdWVuY2llcyBndWFyZHJhaWwgZm9yIHJldGlub2lkc1xuICBjb25zdCBmcmVxID0gcmVzLnJvdXRpbmVfcGxhbj8uZnJlcXVlbmNpZXMgPz8ge307XG4gIGNvbnN0IGxvd2VyS2V5cyA9IE9iamVjdC5rZXlzKGZyZXEpLnJlZHVjZSgoYWNjLGspPT57IGFjY1trLnRvTG93ZXJDYXNlKCldID0gazsgcmV0dXJuIGFjYzsgfSwge30gYXMgUmVjb3JkPHN0cmluZyxzdHJpbmc+KTtcbiAgY29uc3QgbWVudGlvbnNSZXRpbm9pZCA9IChzOnN0cmluZyk9Pi9yZXRpbihhbHxvbCl8cmV0aW5vaWQvaS50ZXN0KHMpO1xuICBjb25zdCBuZWVkc1JhbXAgPSBPYmplY3Qua2V5cyhsb3dlcktleXMpLnNvbWUoaz0+bWVudGlvbnNSZXRpbm9pZChrKSkgfHxcbiAgICAocmVzLnByb2R1Y3RzfHxbXSkuc29tZShwPT5tZW50aW9uc1JldGlub2lkKHAucm9sZSl8fG1lbnRpb25zUmV0aW5vaWQocC5tYXRjaGVkX3Byb2R1Y3QpKTtcblxuICBpZiAobmVlZHNSYW1wKSB7XG4gICAgY29uc3Qga2V5ID0gT2JqZWN0LmtleXMobG93ZXJLZXlzKS5maW5kKGs9Pm1lbnRpb25zUmV0aW5vaWQoaykpID8/IFwicmV0aW5hbFwiO1xuICAgIGNvbnN0IG9yaWdpbmFsS2V5ID0gbG93ZXJLZXlzW2tleV0gPz8ga2V5O1xuICAgIGZyZXFbb3JpZ2luYWxLZXldID0gXCJzdGFydCAy4oCTMyBuaWdodHMvd2VlayBmb3IgMuKAkzMgd2Vla3MsIHRoZW4gM+KAkzQgbmlnaHRzL3dlZWsgaWYgdG9sZXJhdGVkXCI7XG4gICAgcmVzLnJvdXRpbmVfcGxhbiA9IHsgLi4uKHJlcy5yb3V0aW5lX3BsYW58fHt9KSwgZnJlcXVlbmNpZXM6IGZyZXEgfTtcbiAgfVxuXG4gIC8vIENpdGF0aW9uIHJlbWluZGVyIGlmIGJlbmVmaXRzL2NhdXRpb25zIGV4aXN0IGJ1dCBjaXRhdGlvbnMgbWlzc2luZ1xuICBjb25zdCBtaXNzaW5nQ2l0ZXMgPSAocmVzLnByb2R1Y3RzfHxbXSkuc29tZShwID0+IChwLmtleV9iZW5lZml0cz8ubGVuZ3RoIHx8IHAuY2F1dGlvbnM/Lmxlbmd0aCkgJiYgKCFwLmNpdGF0aW9ucyB8fCBwLmNpdGF0aW9ucy5sZW5ndGggPT09IDApKTtcbiAgaWYgKG1pc3NpbmdDaXRlcykge1xuICAgIHJlcy5hbmFseXNpcyA9IHJlcy5hbmFseXNpcyB8fCB7fTtcbiAgICByZXMuYW5hbHlzaXMuc3VnZ2VzdGlvbnMgPSBbLi4uKHJlcy5hbmFseXNpcy5zdWdnZXN0aW9uc3x8W10pLCBcIlNvbWUgcHJvZHVjdCBjbGFpbXMgbGFjayBjaXRhdGlvbnM7IHByZWZlciBicmFuZCBwYWdlcyBvciBJTkNJRGVjb2RlciB3aGVuIGxpc3RpbmcgSU5DSSBvciBpbmdyZWRpZW50LWJhc2VkIGJlbmVmaXRzLlwiXTtcbiAgfVxuXG4gIHJldHVybiByZXM7XG59XG5cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBQT1NUKHJlcXVlc3Q6IE5leHRSZXF1ZXN0KSB7XG4gIHRyeSB7XG4gICAgY29uc3QgeyBwcm9kdWN0cyB9ID0gYXdhaXQgcmVxdWVzdC5qc29uKCk7XG5cbiAgICBpZiAoIXByb2R1Y3RzIHx8ICFBcnJheS5pc0FycmF5KHByb2R1Y3RzKSkge1xuICAgICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKFxuICAgICAgICB7IGVycm9yOiAnUHJvZHVjdHMgYXJyYXkgaXMgcmVxdWlyZWQnIH0sXG4gICAgICAgIHsgc3RhdHVzOiA0MDAgfVxuICAgICAgKTtcbiAgICB9XG5cbiAgICBjb25zdCBhcGlLZXkgPSBwcm9jZXNzLmVudi5PUEVOQUlfQVBJX0tFWTtcbiAgICBpZiAoIWFwaUtleSkge1xuICAgICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKFxuICAgICAgICB7IGVycm9yOiAnT3BlbkFJIEFQSSBrZXkgbm90IGNvbmZpZ3VyZWQnIH0sXG4gICAgICAgIHsgc3RhdHVzOiA1MDAgfVxuICAgICAgKTtcbiAgICB9XG5cbiAgICBjb25zdCBhbmFseXplQm9keSA9IHtcbiAgICAgIG1vZGVsOiBcImdwdC00by1taW5pXCIsXG4gICAgICB0ZW1wZXJhdHVyZTogMC4zLFxuICAgICAgcmVzcG9uc2VfZm9ybWF0OiB7IHR5cGU6IFwianNvbl9vYmplY3RcIiB9LFxuICAgICAgbWVzc2FnZXM6IFtcbiAgICAgICAge1xuICAgICAgICAgIHJvbGU6IFwic3lzdGVtXCIsXG4gICAgICAgICAgY29udGVudDpcbiAgICAgICAgICAgIFwiWW91IGFyZSBhIGNvc21ldGljIGNoZW1pc3QgKyBza2luY2FyZSBlZHVjYXRvci4gU1RSSUNUIFJVTEVTOiBcXFxuICAgICAgICAgICAgMSkgT3V0cHV0IE9OTFkgSlNPTiB1c2luZyB0aGlzIEVYQUNUIHNjaGVtYTogXFxcbiAgICAgICAgICAgIHsgXFxcbiAgICAgICAgICAgICAgXFxcInNjb3JlXFxcIjogbnVtYmVyICgwLTEwMCBPTkxZLCBuZXZlciAxLTEwKSwgXFxcbiAgICAgICAgICAgICAgXFxcInNjb3JlX3JhdGlvbmFsZVxcXCI6IHN0cmluZyAoMi00IHNlbnRlbmNlcyksIFxcXG4gICAgICAgICAgICAgIFxcXCJyb3V0aW5lX3BsYW5cXFwiOiB7IFxcXG4gICAgICAgICAgICAgICAgXFxcImFtXFxcIjogc3RyaW5nW10sIFxcXG4gICAgICAgICAgICAgICAgXFxcInBtXFxcIjogc3RyaW5nW10sIFxcXG4gICAgICAgICAgICAgICAgXFxcImZyZXF1ZW5jaWVzXFxcIjogeyBbcHJvZHVjdE9yQWN0aXZlOiBzdHJpbmddOiBzdHJpbmcgfSBcXFxuICAgICAgICAgICAgICB9LCBcXFxuICAgICAgICAgICAgICBcXFwicHJvZHVjdHNcXFwiOiBbIFxcXG4gICAgICAgICAgICAgICAgeyBcXFxuICAgICAgICAgICAgICAgICAgXFxcInF1ZXJ5XFxcIjogc3RyaW5nLCBcXFxuICAgICAgICAgICAgICAgICAgXFxcIm1hdGNoZWRfcHJvZHVjdFxcXCI6IHN0cmluZywgXFxcbiAgICAgICAgICAgICAgICAgIFxcXCJyb2xlXFxcIjogc3RyaW5nLCBcXFxuICAgICAgICAgICAgICAgICAgXFxcImtleV9iZW5lZml0c1xcXCI6IHN0cmluZ1tdIChNVVNUIGJlIGluZ3JlZGllbnQtYmFzZWQpLCBcXFxuICAgICAgICAgICAgICAgICAgXFxcImNhdXRpb25zXFxcIjogc3RyaW5nW10gKE1VU1QgYmUgaW5ncmVkaWVudC1iYXNlZCksIFxcXG4gICAgICAgICAgICAgICAgICBcXFwiaW5ncmVkaWVudHNfaW5jaVxcXCI6IHsgXFxcIm5hbWVzXFxcIjogc3RyaW5nW10gfSB8IFxcXCJ1bmtub3duXFxcIiwgXFxcbiAgICAgICAgICAgICAgICAgIFxcXCJjaXRhdGlvbnNcXFwiOiBzdHJpbmdbXSAob2ZmaWNpYWwgYnJhbmQgc2l0ZXMgb3IgSU5DSURlY29kZXIpIFxcXG4gICAgICAgICAgICAgICAgfSBcXFxuICAgICAgICAgICAgICBdLCBcXFxuICAgICAgICAgICAgICBcXFwiYW5hbHlzaXNcXFwiOiB7IFxcXG4gICAgICAgICAgICAgICAgXFxcInBhaXJzXFxcIjogWyBcXFxuICAgICAgICAgICAgICAgICAgeyBcXFxuICAgICAgICAgICAgICAgICAgICBcXFwiYmV0d2VlblxcXCI6IFtzdHJpbmcsIHN0cmluZ10sIFxcXG4gICAgICAgICAgICAgICAgICAgIFxcXCJmbGFnc1xcXCI6IFsgXFxcbiAgICAgICAgICAgICAgICAgICAgICB7IFxcXG4gICAgICAgICAgICAgICAgICAgICAgICBcXFwidHlwZVxcXCI6IFxcXCJva190b2dldGhlclxcXCIgfCBcXFwiaXJyaXRhdGlvbl9zdGFja1xcXCIgfCBcXFwicmVkdW5kYW5jeVxcXCIgfCBcXFwiY2F1dGlvblxcXCIsIFxcXG4gICAgICAgICAgICAgICAgICAgICAgICBcXFwic2V2ZXJpdHlcXFwiOiBcXFwibG93XFxcIiB8IFxcXCJtZWRpdW1cXFwiIHwgXFxcImhpZ2hcXFwiLCBcXFxuICAgICAgICAgICAgICAgICAgICAgICAgXFxcIndoeVxcXCI6IHN0cmluZywgXFxcbiAgICAgICAgICAgICAgICAgICAgICAgIFxcXCJzb3VyY2VzXFxcIjogc3RyaW5nW10gXFxcbiAgICAgICAgICAgICAgICAgICAgICB9IFxcXG4gICAgICAgICAgICAgICAgICAgIF0sIFxcXG4gICAgICAgICAgICAgICAgICAgIFxcXCJzdWdnZXN0aW9uc1xcXCI6IHN0cmluZ1tdIFxcXG4gICAgICAgICAgICAgICAgICB9IFxcXG4gICAgICAgICAgICAgICAgXSwgXFxcbiAgICAgICAgICAgICAgICBcXFwiZ2xvYmFsX29ic2VydmF0aW9uc1xcXCI6IHN0cmluZ1tdLCBcXFxuICAgICAgICAgICAgICAgIFxcXCJzdWdnZXN0aW9uc1xcXCI6IHN0cmluZ1tdIFxcXG4gICAgICAgICAgICAgIH0gXFxcbiAgICAgICAgICAgIH0gXFxcbiAgICAgICAgICAgIGZyZXF1ZW5jaWVzIGV4YW1wbGVzOiBcXFxuICAgICAgICAgICAgeyBcXFwicmV0aW5hbFxcXCI6IFxcXCJzdGFydCAy4oCTMyBuaWdodHMvd2VlayBmb3IgMuKAkzMgd2Vla3MsIHRoZW4gM+KAkzQgbmlnaHRzL3dlZWsgaWYgdG9sZXJhdGVkXFxcIiwgXFxcbiAgICAgICAgICAgICAgXFxcInNhbGljeWxpYyBhY2lkXFxcIjogXFxcIjHigJMzeC93ZWVrXFxcIiwgXFxcbiAgICAgICAgICAgICAgXFxcInN1bnNjcmVlblxcXCI6IFxcXCJldmVyeSBBTVxcXCIgfSBcXFxuICAgICAgICAgICAgMikgU0NPUklORyBSVUxFUyAoMC0xMDAgc2NhbGUpOiBcXFxuICAgICAgICAgICAgLSBCYXNlIHNjb3JlOiA3NSBcXFxuICAgICAgICAgICAgLSBQZW5hbHRpZXM6IC0yNSAoaGlnaCBzZXZlcml0eSksIC0xMiAobWVkaXVtKSwgLTYgKGxvdykgXFxcbiAgICAgICAgICAgIC0gQm9udXNlczogKzUgKHN1bnNjcmVlbiksICs1IChzb290aGluZy9idWZmZXJzKSBcXFxuICAgICAgICAgICAgMykgSU5HUkVESUVOVCBSRVFVSVJFTUVOVFM6IFxcXG4gICAgICAgICAgICAtIGtleV9iZW5lZml0cyBhbmQgY2F1dGlvbnMgTVVTVCBjaXRlIHNwZWNpZmljIGluZ3JlZGllbnRzIChyZXRpbm9sLCBuaWFjaW5hbWlkZSwgZXRjLikgXFxcbiAgICAgICAgICAgIC0gTk8gZ2VuZXJpYyBjbGFpbXMgbGlrZSBcXFwiYW50aS1hZ2luZ1xcXCIgd2l0aG91dCBpbmdyZWRpZW50IGJhc2lzIFxcXG4gICAgICAgICAgICAtIElmIHlvdSBjYW5ub3QgcmV0cmlldmUgYSBjcmVkaWJsZSBJTkNJIGxpc3QgZnJvbSBicmFuZCBvciBhIHJlcHV0YWJsZSBpbmdyZWRpZW50IGRhdGFiYXNlIChlLmcuLCBJTkNJRGVjb2RlciksIHNldCBpbmdyZWRpZW50c19pbmNpIHRvIFxcXCJ1bmtub3duXFxcIi4gRG8gTk9UIGludmVudCBJTkNJLiBcXFxuICAgICAgICAgICAgLSBJZiB5b3UgcmVjb21tZW5kIGRhaWx5IHJldGluYWwvcmV0aW5vbCwgaW5jbHVkZSBhIHJhbXAgc2NoZWR1bGUgaW5zdGVhZCAoc3RhcnQgMuKAkzMgbmlnaHRzL3dlZWspLiBcXFxuICAgICAgICAgICAgLSBJZiBvZmZpY2lhbCBJTkNJIG5vdCBmb3VuZCwgc2V0IGluZ3JlZGllbnRzX2luY2kgdG8gXFxcInVua25vd25cXFwiIGFuZCBzdGlsbCBwcm92aWRlIGJyYW5kIFVSTDsgb3B0aW9uYWxseSBhZGQgYW4gaW5ncmVkaWVudCBEQiBVUkwgaWYgYXZhaWxhYmxlLiBcXFxuICAgICAgICAgICAgNCkgUEFJUiBGTEFHUzogRWFjaCBmbGFnIE1VU1QgaW5jbHVkZSB0eXBlLCBzZXZlcml0eSwgd2h5LCBhbmQgc291cmNlcyBcXFxuICAgICAgICAgICAgNSkgRG8gbm90IGludmVudCB1bnZlcmlmaWFibGUgY2xhaW1zLiBVc2UgYnJhbmQgc2l0ZXMgb3IgSU5DSURlY29kZXIuIElmIHVua25vd24sIHNheSAndW5rbm93bicuXCJcbiAgICAgICAgfSxcbiAgICAgICAge1xuICAgICAgICAgIHJvbGU6IFwidXNlclwiLFxuICAgICAgICAgIGNvbnRlbnQ6IFwiRXZhbHVhdGUgdGhpcyByb3V0aW5lIGZvciBjb21wYXRpYmlsaXR5IHVzaW5nIHRoZSBleGFjdCBzY2hlbWEgYWJvdmUuXCJcbiAgICAgICAgfSxcbiAgICAgICAgeyBcbiAgICAgICAgICByb2xlOiBcInVzZXJcIiwgXG4gICAgICAgICAgY29udGVudDogSlNPTi5zdHJpbmdpZnkoeyBwcm9kdWN0cyB9KSBcbiAgICAgICAgfVxuICAgICAgXVxuICAgIH07XG5cbiAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGZldGNoKCdodHRwczovL2FwaS5vcGVuYWkuY29tL3YxL2NoYXQvY29tcGxldGlvbnMnLCB7XG4gICAgICBtZXRob2Q6ICdQT1NUJyxcbiAgICAgIGhlYWRlcnM6IHtcbiAgICAgICAgJ0F1dGhvcml6YXRpb24nOiBgQmVhcmVyICR7YXBpS2V5fWAsXG4gICAgICAgICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24vanNvbicsXG4gICAgICB9LFxuICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoYW5hbHl6ZUJvZHkpLFxuICAgIH0pO1xuXG4gICAgaWYgKCFyZXNwb25zZS5vaykge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKGBPcGVuQUkgQVBJIGVycm9yOiAke3Jlc3BvbnNlLnN0YXR1c31gKTtcbiAgICB9XG5cbiAgICBjb25zdCBkYXRhID0gYXdhaXQgcmVzcG9uc2UuanNvbigpO1xuICAgIFxuICAgIC8vIEV4dHJhY3QgdGhlIEpTT04gY29udGVudCBmcm9tIHRoZSBPcGVuQUkgcmVzcG9uc2VcbiAgICBpZiAoZGF0YS5jaG9pY2VzICYmIGRhdGEuY2hvaWNlc1swXSAmJiBkYXRhLmNob2ljZXNbMF0ubWVzc2FnZSAmJiBkYXRhLmNob2ljZXNbMF0ubWVzc2FnZS5jb250ZW50KSB7XG4gICAgICB0cnkge1xuICAgICAgICBjb25zdCByYXcgPSBKU09OLnBhcnNlKGRhdGEuY2hvaWNlc1swXS5tZXNzYWdlLmNvbnRlbnQpO1xuICAgICAgICBsZXQgb3V0OiBDb21wYXQ7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgb3V0ID0gbm9ybWFsaXplKHJhdyk7XG4gICAgICAgIH0gY2F0Y2ggKGU6IGFueSkge1xuICAgICAgICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbihcbiAgICAgICAgICAgIHsgZXJyb3I6IHsgbWVzc2FnZTogXCJJbnZhbGlkIG1vZGVsIEpTT05cIiwgZGV0YWlsczogU3RyaW5nKGU/Lm1lc3NhZ2UgfHwgZSkgfSB9LFxuICAgICAgICAgICAgeyBzdGF0dXM6IDQyMiB9XG4gICAgICAgICAgKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24ob3V0KTtcbiAgICAgIH0gY2F0Y2ggKHBhcnNlRXJyb3IpIHtcbiAgICAgICAgY29uc29sZS5lcnJvcignRXJyb3IgcGFyc2luZyBPcGVuQUkgcmVzcG9uc2U6JywgcGFyc2VFcnJvcik7XG4gICAgICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbihcbiAgICAgICAgICB7IGVycm9yOiAnRmFpbGVkIHRvIHBhcnNlIGFuYWx5c2lzIHJlc3VsdCcgfSxcbiAgICAgICAgICB7IHN0YXR1czogNTAwIH1cbiAgICAgICAgKTtcbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKFxuICAgICAgICB7IGVycm9yOiAnSW52YWxpZCByZXNwb25zZSBmcm9tIE9wZW5BSScgfSxcbiAgICAgICAgeyBzdGF0dXM6IDUwMCB9XG4gICAgICApO1xuICAgIH1cblxuICB9IGNhdGNoIChlcnJvcikge1xuICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGluIGNvbXBhdGliaWxpdHkgYW5hbHlzaXM6JywgZXJyb3IpO1xuICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbihcbiAgICAgIHsgZXJyb3I6ICdGYWlsZWQgdG8gYW5hbHl6ZSBjb21wYXRpYmlsaXR5JyB9LFxuICAgICAgeyBzdGF0dXM6IDUwMCB9XG4gICAgKTtcbiAgfVxufVxuIl0sIm5hbWVzIjpbIk5leHRSZXNwb25zZSIsIm5vcm1hbGl6ZSIsIm91dCIsIkVycm9yIiwicmVzIiwic2NvcmUiLCJOdW1iZXIiLCJpc05hTiIsIk1hdGgiLCJtYXgiLCJtaW4iLCJyb3VuZCIsImZyZXEiLCJyb3V0aW5lX3BsYW4iLCJmcmVxdWVuY2llcyIsImxvd2VyS2V5cyIsIk9iamVjdCIsImtleXMiLCJyZWR1Y2UiLCJhY2MiLCJrIiwidG9Mb3dlckNhc2UiLCJtZW50aW9uc1JldGlub2lkIiwicyIsInRlc3QiLCJuZWVkc1JhbXAiLCJzb21lIiwicHJvZHVjdHMiLCJwIiwicm9sZSIsIm1hdGNoZWRfcHJvZHVjdCIsImtleSIsImZpbmQiLCJvcmlnaW5hbEtleSIsIm1pc3NpbmdDaXRlcyIsImtleV9iZW5lZml0cyIsImxlbmd0aCIsImNhdXRpb25zIiwiY2l0YXRpb25zIiwiYW5hbHlzaXMiLCJzdWdnZXN0aW9ucyIsIlBPU1QiLCJyZXF1ZXN0IiwianNvbiIsIkFycmF5IiwiaXNBcnJheSIsImVycm9yIiwic3RhdHVzIiwiYXBpS2V5IiwicHJvY2VzcyIsImVudiIsIk9QRU5BSV9BUElfS0VZIiwiYW5hbHl6ZUJvZHkiLCJtb2RlbCIsInRlbXBlcmF0dXJlIiwicmVzcG9uc2VfZm9ybWF0IiwidHlwZSIsIm1lc3NhZ2VzIiwiY29udGVudCIsIkpTT04iLCJzdHJpbmdpZnkiLCJyZXNwb25zZSIsImZldGNoIiwibWV0aG9kIiwiaGVhZGVycyIsImJvZHkiLCJvayIsImRhdGEiLCJjaG9pY2VzIiwibWVzc2FnZSIsInJhdyIsInBhcnNlIiwiZSIsImRldGFpbHMiLCJTdHJpbmciLCJwYXJzZUVycm9yIiwiY29uc29sZSJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./app/api/compatibility/route.ts\n");

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../../webpack-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = __webpack_require__.X(0, ["vendor-chunks/next"], () => (__webpack_exec__("(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fcompatibility%2Froute&page=%2Fapi%2Fcompatibility%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fcompatibility%2Froute.ts&appDir=%2FUsers%2Fshaivirau%2FSkincare%2Fskin-check%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Fshaivirau%2FSkincare%2Fskin-check&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!")));
module.exports = __webpack_exports__;

})();